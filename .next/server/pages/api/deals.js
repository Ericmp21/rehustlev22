"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/deals";
exports.ids = ["pages/api/deals"];
exports.modules = {

/***/ "(api-node)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   getTrialStatus: () => (/* binding */ getTrialStatus),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   isAuthenticated: () => (/* binding */ isAuthenticated),\n/* harmony export */   isTrialActive: () => (/* binding */ isTrialActive),\n/* harmony export */   requireAuthentication: () => (/* binding */ requireAuthentication),\n/* harmony export */   updateSubscriptionStatus: () => (/* binding */ updateSubscriptionStatus),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mongodb */ \"(api-node)/./lib/mongodb.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../models/User */ \"(api-node)/./models/User.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([bcryptjs__WEBPACK_IMPORTED_MODULE_1__]);\nbcryptjs__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nasync function hashPassword(password) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hash(password, 12);\n}\nasync function verifyPassword(password, hashedPassword) {\n    try {\n        // Special case for test user (makes debugging easier)\n        if (password === 'password123' && hashedPassword === 'password123') {\n            console.log('Special case: Test user with unhashed password');\n            return true;\n        }\n        // For debugging\n        console.log(`Verifying password - Hash starts with: ${hashedPassword.substring(0, 10)}...`);\n        return await bcryptjs__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(password, hashedPassword);\n    } catch (error) {\n        console.error('Error comparing passwords:', error);\n        console.error('Password hash:', hashedPassword ? hashedPassword.substring(0, 10) + '...' : 'NULL');\n        return false;\n    }\n}\n// Get user from MongoDB using their email\nasync function getUserByEmail(email) {\n    try {\n        if (!email) {\n            console.error('getUserByEmail called with empty email');\n            return null;\n        }\n        console.log(`Looking up user with email: ${email}`);\n        // Connect to the database\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        // Find user by email\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            email\n        });\n        if (user) {\n            console.log(`Found user with email ${email}, ID: ${user._id}`);\n        } else {\n            console.log(`No user found with email: ${email}`);\n        }\n        return user;\n    } catch (error) {\n        console.error('Error in getUserByEmail:', error);\n        throw new Error(`Database error when fetching user: ${error.message}`);\n    }\n}\n// Create a new user in MongoDB\nasync function createUser(userData) {\n    try {\n        // Connect to the database\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        const { email, password, name, trial_start_date, is_subscribed } = userData;\n        console.log(`Hashing password for new user: ${email}`);\n        const hashedPassword = await hashPassword(password);\n        // Format trial start date properly\n        const trialStartDate = trial_start_date ? new Date(trial_start_date) : new Date();\n        // Create a full user record\n        const userDoc = {\n            email,\n            password: hashedPassword,\n            name: name || email.split('@')[0],\n            trial_start_date: trialStartDate,\n            is_subscribed: is_subscribed || false,\n            createdAt: new Date(),\n            lastLogin: new Date()\n        };\n        console.log(`Creating new user in database: ${email}`);\n        const newUser = await _models_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].create(userDoc);\n        console.log(`User created successfully, ID: ${newUser._id}`);\n        // Return user object with ID for session creation\n        return {\n            id: newUser._id.toString(),\n            _id: newUser._id,\n            email,\n            name: userDoc.name,\n            trial_start_date: trialStartDate,\n            is_subscribed: userDoc.is_subscribed\n        };\n    } catch (error) {\n        console.error('Error in createUser:', error);\n        throw new Error(`Database error when creating user: ${error.message}`);\n    }\n}\n// Check if a user is authenticated for API routes\nasync function isAuthenticated(req, res) {\n    const session = await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.getSession)({\n        req\n    });\n    if (!session) {\n        res.status(401).json({\n            error: 'Not authenticated'\n        });\n        return false;\n    }\n    return session;\n}\n// Check if trial is active for a user\nasync function isTrialActive(userId) {\n    try {\n        // Connect to the database\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        // Get the user with the given id\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(userId);\n        if (!user) {\n            return false;\n        }\n        // If user is subscribed, trial status doesn't matter\n        if (user.is_subscribed) {\n            return true;\n        }\n        // Check if the trial has expired (7 days from start)\n        const trialStartDate = user.trial_start_date ? new Date(user.trial_start_date) : null;\n        if (!trialStartDate) {\n            return false; // No trial start date found\n        }\n        // Calculate trial end date (7 days after start)\n        const trialEndDate = new Date(trialStartDate);\n        trialEndDate.setDate(trialEndDate.getDate() + 7);\n        // Check if current date is before trial end date\n        const currentDate = new Date();\n        return currentDate < trialEndDate;\n    } catch (error) {\n        console.error('Error checking trial status:', error);\n        return false; // Default to trial expired on error\n    }\n}\n// Get trial status information for a user\nasync function getTrialStatus(userId) {\n    try {\n        // Connect to the database\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        // Get the user with the given id\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findById(userId);\n        if (!user) {\n            throw new Error('User not found');\n        }\n        // If user is already subscribed\n        if (user.is_subscribed) {\n            return {\n                isActive: true,\n                isSubscribed: true,\n                trialStartDate: user.trial_start_date,\n                trialEndDate: null,\n                daysRemaining: 0,\n                message: 'Subscribed account'\n            };\n        }\n        // Calculate trial information\n        const trialStartDate = user.trial_start_date ? new Date(user.trial_start_date) : new Date();\n        const trialEndDate = new Date(trialStartDate);\n        trialEndDate.setDate(trialEndDate.getDate() + 7);\n        const currentDate = new Date();\n        const isActive = currentDate < trialEndDate;\n        // Calculate days remaining\n        const diffTime = trialEndDate.getTime() - currentDate.getTime();\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        const daysRemaining = Math.max(0, diffDays);\n        // Return trial status\n        return {\n            isActive,\n            isSubscribed: false,\n            trialStartDate,\n            trialEndDate,\n            daysRemaining,\n            message: isActive ? `Trial active - ${daysRemaining} days remaining` : 'Trial has expired'\n        };\n    } catch (error) {\n        console.error('Error getting trial status:', error);\n        throw error;\n    }\n}\n// Update subscription status\nasync function updateSubscriptionStatus(userId, isSubscribed) {\n    try {\n        // Connect to the database\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        // Update the user with subscription status\n        const result = await _models_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateOne({\n            _id: userId\n        }, {\n            $set: {\n                is_subscribed: isSubscribed\n            }\n        });\n        return result.modifiedCount > 0;\n    } catch (error) {\n        console.error('Error updating subscription status:', error);\n        throw error;\n    }\n}\n// Check if a user is authenticated, has active trial/subscription and redirect if needed\nasync function requireAuthentication(context) {\n    const session = await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.getSession)(context);\n    // If no user is logged in, redirect to login\n    if (!session) {\n        return {\n            redirect: {\n                destination: '/login',\n                permanent: false\n            }\n        };\n    }\n    try {\n        // Connect to the database\n        await (0,_mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n        // Get full user data including trial/subscription info\n        const user = await _models_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n            email: session.user.email\n        });\n        // If user not found in database but has session\n        if (!user) {\n            // Clear session and redirect to login\n            return {\n                redirect: {\n                    destination: '/login',\n                    permanent: false\n                }\n            };\n        }\n        // Check if subscribed or trial is active\n        const isSubscribed = user.is_subscribed;\n        if (isSubscribed) {\n            // User is subscribed, allow access\n            return {\n                props: {\n                    user: {\n                        ...session.user,\n                        isSubscribed: true,\n                        trialActive: true\n                    }\n                }\n            };\n        }\n        // Check trial status\n        const trialStartDate = user.trial_start_date ? new Date(user.trial_start_date) : null;\n        if (!trialStartDate) {\n            // No trial start date, redirect to upgrade\n            return {\n                redirect: {\n                    destination: '/upgrade',\n                    permanent: false\n                }\n            };\n        }\n        // Calculate trial end date and compare with current date\n        const trialEndDate = new Date(trialStartDate);\n        trialEndDate.setDate(trialEndDate.getDate() + 7);\n        const currentDate = new Date();\n        const trialActive = currentDate < trialEndDate;\n        if (!trialActive) {\n            // Trial has expired, redirect to upgrade page\n            return {\n                redirect: {\n                    destination: '/upgrade',\n                    permanent: false\n                }\n            };\n        }\n        // Calculate days remaining in trial\n        const diffTime = trialEndDate.getTime() - currentDate.getTime();\n        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        const daysRemaining = Math.max(0, diffDays);\n        // Trial is active, allow access with trial info\n        return {\n            props: {\n                user: {\n                    ...session.user,\n                    isSubscribed: false,\n                    trialActive: true,\n                    trialEndDate: trialEndDate.toISOString(),\n                    daysRemaining\n                }\n            }\n        };\n    } catch (error) {\n        console.error('Error in requireAuthentication:', error);\n        // On error, default to allowing access with warning\n        // This prevents locked-out users in case of database errors\n        return {\n            props: {\n                user: {\n                    ...session.user,\n                    isSubscribed: false,\n                    trialActive: true,\n                    trialStatus: 'unknown',\n                    error: 'Could not verify subscription status'\n                }\n            }\n        };\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNKLEdBQUd1QixRQUFRdkIsSUFBSTtvQkFDZm1DLGNBQWM7b0JBQ2RtQixhQUFhO29CQUNiRSxhQUFhO29CQUNiM0QsT0FBTztnQkFDVDtZQUNGO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2xpYi9hdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldFNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvcmVhY3QnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgZGJDb25uZWN0IGZyb20gJy4vbW9uZ29kYic7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbHMvVXNlcic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQpIHtcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMik7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgaGFzaGVkUGFzc3dvcmQpIHtcbiAgdHJ5IHtcbiAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIHRlc3QgdXNlciAobWFrZXMgZGVidWdnaW5nIGVhc2llcilcbiAgICBpZiAocGFzc3dvcmQgPT09ICdwYXNzd29yZDEyMycgJiYgaGFzaGVkUGFzc3dvcmQgPT09ICdwYXNzd29yZDEyMycpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTcGVjaWFsIGNhc2U6IFRlc3QgdXNlciB3aXRoIHVuaGFzaGVkIHBhc3N3b3JkJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gRm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUubG9nKGBWZXJpZnlpbmcgcGFzc3dvcmQgLSBIYXNoIHN0YXJ0cyB3aXRoOiAke2hhc2hlZFBhc3N3b3JkLnN1YnN0cmluZygwLCAxMCl9Li4uYCk7XG4gICAgXG4gICAgcmV0dXJuIGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCBoYXNoZWRQYXNzd29yZCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY29tcGFyaW5nIHBhc3N3b3JkczonLCBlcnJvcik7XG4gICAgY29uc29sZS5lcnJvcignUGFzc3dvcmQgaGFzaDonLCBoYXNoZWRQYXNzd29yZCA/IGhhc2hlZFBhc3N3b3JkLnN1YnN0cmluZygwLCAxMCkgKyAnLi4uJyA6ICdOVUxMJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEdldCB1c2VyIGZyb20gTW9uZ29EQiB1c2luZyB0aGVpciBlbWFpbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUVtYWlsKGVtYWlsKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFlbWFpbCkge1xuICAgICAgY29uc29sZS5lcnJvcignZ2V0VXNlckJ5RW1haWwgY2FsbGVkIHdpdGggZW1wdHkgZW1haWwnKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgTG9va2luZyB1cCB1c2VyIHdpdGggZW1haWw6ICR7ZW1haWx9YCk7XG4gICAgXG4gICAgLy8gQ29ubmVjdCB0byB0aGUgZGF0YWJhc2VcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICBcbiAgICAvLyBGaW5kIHVzZXIgYnkgZW1haWxcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgZW1haWwgfSk7XG4gICAgXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCB1c2VyIHdpdGggZW1haWwgJHtlbWFpbH0sIElEOiAke3VzZXIuX2lkfWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgTm8gdXNlciBmb3VuZCB3aXRoIGVtYWlsOiAke2VtYWlsfWApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRVc2VyQnlFbWFpbDonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBEYXRhYmFzZSBlcnJvciB3aGVuIGZldGNoaW5nIHVzZXI6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vLyBDcmVhdGUgYSBuZXcgdXNlciBpbiBNb25nb0RCXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcih1c2VyRGF0YSkge1xuICB0cnkge1xuICAgIC8vIENvbm5lY3QgdG8gdGhlIGRhdGFiYXNlXG4gICAgYXdhaXQgZGJDb25uZWN0KCk7XG4gICAgXG4gICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQsIG5hbWUsIHRyaWFsX3N0YXJ0X2RhdGUsIGlzX3N1YnNjcmliZWQgfSA9IHVzZXJEYXRhO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBIYXNoaW5nIHBhc3N3b3JkIGZvciBuZXcgdXNlcjogJHtlbWFpbH1gKTtcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGhhc2hQYXNzd29yZChwYXNzd29yZCk7XG4gICAgXG4gICAgLy8gRm9ybWF0IHRyaWFsIHN0YXJ0IGRhdGUgcHJvcGVybHlcbiAgICBjb25zdCB0cmlhbFN0YXJ0RGF0ZSA9IHRyaWFsX3N0YXJ0X2RhdGUgPyBuZXcgRGF0ZSh0cmlhbF9zdGFydF9kYXRlKSA6IG5ldyBEYXRlKCk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgZnVsbCB1c2VyIHJlY29yZFxuICAgIGNvbnN0IHVzZXJEb2MgPSB7XG4gICAgICBlbWFpbCxcbiAgICAgIHBhc3N3b3JkOiBoYXNoZWRQYXNzd29yZCxcbiAgICAgIG5hbWU6IG5hbWUgfHwgZW1haWwuc3BsaXQoJ0AnKVswXSwgLy8gVXNlIGVtYWlsIHByZWZpeCBhcyBuYW1lIGlmIG5vdCBwcm92aWRlZFxuICAgICAgdHJpYWxfc3RhcnRfZGF0ZTogdHJpYWxTdGFydERhdGUsXG4gICAgICBpc19zdWJzY3JpYmVkOiBpc19zdWJzY3JpYmVkIHx8IGZhbHNlLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgbGFzdExvZ2luOiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgXG4gICAgY29uc29sZS5sb2coYENyZWF0aW5nIG5ldyB1c2VyIGluIGRhdGFiYXNlOiAke2VtYWlsfWApO1xuICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh1c2VyRG9jKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgVXNlciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgSUQ6ICR7bmV3VXNlci5faWR9YCk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHVzZXIgb2JqZWN0IHdpdGggSUQgZm9yIHNlc3Npb24gY3JlYXRpb25cbiAgICByZXR1cm4geyBcbiAgICAgIGlkOiBuZXdVc2VyLl9pZC50b1N0cmluZygpLCAvLyBDb252ZXJ0IE9iamVjdElkIHRvIHN0cmluZ1xuICAgICAgX2lkOiBuZXdVc2VyLl9pZCwgLy8gSW5jbHVkZSByYXcgX2lkIGZvciBjb21wYXRpYmlsaXR5XG4gICAgICBlbWFpbCwgXG4gICAgICBuYW1lOiB1c2VyRG9jLm5hbWUsIFxuICAgICAgdHJpYWxfc3RhcnRfZGF0ZTogdHJpYWxTdGFydERhdGUsXG4gICAgICBpc19zdWJzY3JpYmVkOiB1c2VyRG9jLmlzX3N1YnNjcmliZWRcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNyZWF0ZVVzZXI6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihgRGF0YWJhc2UgZXJyb3Igd2hlbiBjcmVhdGluZyB1c2VyOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIH1cbn1cblxuLy8gQ2hlY2sgaWYgYSB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgZm9yIEFQSSByb3V0ZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc0F1dGhlbnRpY2F0ZWQocmVxLCByZXMpIHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oeyByZXEgfSk7XG4gIFxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnTm90IGF1dGhlbnRpY2F0ZWQnIH0pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgcmV0dXJuIHNlc3Npb247XG59XG5cbi8vIENoZWNrIGlmIHRyaWFsIGlzIGFjdGl2ZSBmb3IgYSB1c2VyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNUcmlhbEFjdGl2ZSh1c2VySWQpIHtcbiAgdHJ5IHtcbiAgICAvLyBDb25uZWN0IHRvIHRoZSBkYXRhYmFzZVxuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xuICAgIFxuICAgIC8vIEdldCB0aGUgdXNlciB3aXRoIHRoZSBnaXZlbiBpZFxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIHVzZXIgaXMgc3Vic2NyaWJlZCwgdHJpYWwgc3RhdHVzIGRvZXNuJ3QgbWF0dGVyXG4gICAgaWYgKHVzZXIuaXNfc3Vic2NyaWJlZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoZSB0cmlhbCBoYXMgZXhwaXJlZCAoNyBkYXlzIGZyb20gc3RhcnQpXG4gICAgY29uc3QgdHJpYWxTdGFydERhdGUgPSB1c2VyLnRyaWFsX3N0YXJ0X2RhdGUgPyBuZXcgRGF0ZSh1c2VyLnRyaWFsX3N0YXJ0X2RhdGUpIDogbnVsbDtcbiAgICBcbiAgICBpZiAoIXRyaWFsU3RhcnREYXRlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIE5vIHRyaWFsIHN0YXJ0IGRhdGUgZm91bmRcbiAgICB9XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIHRyaWFsIGVuZCBkYXRlICg3IGRheXMgYWZ0ZXIgc3RhcnQpXG4gICAgY29uc3QgdHJpYWxFbmREYXRlID0gbmV3IERhdGUodHJpYWxTdGFydERhdGUpO1xuICAgIHRyaWFsRW5kRGF0ZS5zZXREYXRlKHRyaWFsRW5kRGF0ZS5nZXREYXRlKCkgKyA3KTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiBjdXJyZW50IGRhdGUgaXMgYmVmb3JlIHRyaWFsIGVuZCBkYXRlXG4gICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHJldHVybiBjdXJyZW50RGF0ZSA8IHRyaWFsRW5kRGF0ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyB0cmlhbCBzdGF0dXM6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTsgLy8gRGVmYXVsdCB0byB0cmlhbCBleHBpcmVkIG9uIGVycm9yXG4gIH1cbn1cblxuLy8gR2V0IHRyaWFsIHN0YXR1cyBpbmZvcm1hdGlvbiBmb3IgYSB1c2VyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJpYWxTdGF0dXModXNlcklkKSB7XG4gIHRyeSB7XG4gICAgLy8gQ29ubmVjdCB0byB0aGUgZGF0YWJhc2VcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICBcbiAgICAvLyBHZXQgdGhlIHVzZXIgd2l0aCB0aGUgZ2l2ZW4gaWRcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuICAgIFxuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiB1c2VyIGlzIGFscmVhZHkgc3Vic2NyaWJlZFxuICAgIGlmICh1c2VyLmlzX3N1YnNjcmliZWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICBpc1N1YnNjcmliZWQ6IHRydWUsXG4gICAgICAgIHRyaWFsU3RhcnREYXRlOiB1c2VyLnRyaWFsX3N0YXJ0X2RhdGUsXG4gICAgICAgIHRyaWFsRW5kRGF0ZTogbnVsbCxcbiAgICAgICAgZGF5c1JlbWFpbmluZzogMCxcbiAgICAgICAgbWVzc2FnZTogJ1N1YnNjcmliZWQgYWNjb3VudCdcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIENhbGN1bGF0ZSB0cmlhbCBpbmZvcm1hdGlvblxuICAgIGNvbnN0IHRyaWFsU3RhcnREYXRlID0gdXNlci50cmlhbF9zdGFydF9kYXRlID8gbmV3IERhdGUodXNlci50cmlhbF9zdGFydF9kYXRlKSA6IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgdHJpYWxFbmREYXRlID0gbmV3IERhdGUodHJpYWxTdGFydERhdGUpO1xuICAgIHRyaWFsRW5kRGF0ZS5zZXREYXRlKHRyaWFsRW5kRGF0ZS5nZXREYXRlKCkgKyA3KTtcbiAgICBcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgaXNBY3RpdmUgPSBjdXJyZW50RGF0ZSA8IHRyaWFsRW5kRGF0ZTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgZGF5cyByZW1haW5pbmdcbiAgICBjb25zdCBkaWZmVGltZSA9IHRyaWFsRW5kRGF0ZS5nZXRUaW1lKCkgLSBjdXJyZW50RGF0ZS5nZXRUaW1lKCk7XG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICAgIGNvbnN0IGRheXNSZW1haW5pbmcgPSBNYXRoLm1heCgwLCBkaWZmRGF5cyk7XG4gICAgXG4gICAgLy8gUmV0dXJuIHRyaWFsIHN0YXR1c1xuICAgIHJldHVybiB7XG4gICAgICBpc0FjdGl2ZSxcbiAgICAgIGlzU3Vic2NyaWJlZDogZmFsc2UsXG4gICAgICB0cmlhbFN0YXJ0RGF0ZSxcbiAgICAgIHRyaWFsRW5kRGF0ZSxcbiAgICAgIGRheXNSZW1haW5pbmcsXG4gICAgICBtZXNzYWdlOiBpc0FjdGl2ZSBcbiAgICAgICAgPyBgVHJpYWwgYWN0aXZlIC0gJHtkYXlzUmVtYWluaW5nfSBkYXlzIHJlbWFpbmluZ2AgXG4gICAgICAgIDogJ1RyaWFsIGhhcyBleHBpcmVkJ1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB0cmlhbCBzdGF0dXM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIFVwZGF0ZSBzdWJzY3JpcHRpb24gc3RhdHVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9uU3RhdHVzKHVzZXJJZCwgaXNTdWJzY3JpYmVkKSB7XG4gIHRyeSB7XG4gICAgLy8gQ29ubmVjdCB0byB0aGUgZGF0YWJhc2VcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIHVzZXIgd2l0aCBzdWJzY3JpcHRpb24gc3RhdHVzXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci51cGRhdGVPbmUoXG4gICAgICB7IF9pZDogdXNlcklkIH0sXG4gICAgICB7ICRzZXQ6IHsgaXNfc3Vic2NyaWJlZDogaXNTdWJzY3JpYmVkIH0gfVxuICAgICk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdC5tb2RpZmllZENvdW50ID4gMDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBzdWJzY3JpcHRpb24gc3RhdHVzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBDaGVjayBpZiBhIHVzZXIgaXMgYXV0aGVudGljYXRlZCwgaGFzIGFjdGl2ZSB0cmlhbC9zdWJzY3JpcHRpb24gYW5kIHJlZGlyZWN0IGlmIG5lZWRlZFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVBdXRoZW50aWNhdGlvbihjb250ZXh0KSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKGNvbnRleHQpO1xuICBcbiAgLy8gSWYgbm8gdXNlciBpcyBsb2dnZWQgaW4sIHJlZGlyZWN0IHRvIGxvZ2luXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHJldHVybiB7XG4gICAgICByZWRpcmVjdDoge1xuICAgICAgICBkZXN0aW5hdGlvbjogJy9sb2dpbicsXG4gICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgXG4gIHRyeSB7XG4gICAgLy8gQ29ubmVjdCB0byB0aGUgZGF0YWJhc2VcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICBcbiAgICAvLyBHZXQgZnVsbCB1c2VyIGRhdGEgaW5jbHVkaW5nIHRyaWFsL3N1YnNjcmlwdGlvbiBpbmZvXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwgfSk7XG4gICAgXG4gICAgLy8gSWYgdXNlciBub3QgZm91bmQgaW4gZGF0YWJhc2UgYnV0IGhhcyBzZXNzaW9uXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICAvLyBDbGVhciBzZXNzaW9uIGFuZCByZWRpcmVjdCB0byBsb2dpblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgICBkZXN0aW5hdGlvbjogJy9sb2dpbicsXG4gICAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHN1YnNjcmliZWQgb3IgdHJpYWwgaXMgYWN0aXZlXG4gICAgY29uc3QgaXNTdWJzY3JpYmVkID0gdXNlci5pc19zdWJzY3JpYmVkO1xuICAgIFxuICAgIGlmIChpc1N1YnNjcmliZWQpIHtcbiAgICAgIC8vIFVzZXIgaXMgc3Vic2NyaWJlZCwgYWxsb3cgYWNjZXNzXG4gICAgICByZXR1cm4geyBcbiAgICAgICAgcHJvcHM6IHsgXG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgLi4uc2Vzc2lvbi51c2VyLFxuICAgICAgICAgICAgaXNTdWJzY3JpYmVkOiB0cnVlLFxuICAgICAgICAgICAgdHJpYWxBY3RpdmU6IHRydWVcbiAgICAgICAgICB9IFxuICAgICAgICB9IFxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgdHJpYWwgc3RhdHVzXG4gICAgY29uc3QgdHJpYWxTdGFydERhdGUgPSB1c2VyLnRyaWFsX3N0YXJ0X2RhdGUgPyBuZXcgRGF0ZSh1c2VyLnRyaWFsX3N0YXJ0X2RhdGUpIDogbnVsbDtcbiAgICBcbiAgICBpZiAoIXRyaWFsU3RhcnREYXRlKSB7XG4gICAgICAvLyBObyB0cmlhbCBzdGFydCBkYXRlLCByZWRpcmVjdCB0byB1cGdyYWRlXG4gICAgICByZXR1cm4ge1xuICAgICAgICByZWRpcmVjdDoge1xuICAgICAgICAgIGRlc3RpbmF0aW9uOiAnL3VwZ3JhZGUnLFxuICAgICAgICAgIHBlcm1hbmVudDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgdHJpYWwgZW5kIGRhdGUgYW5kIGNvbXBhcmUgd2l0aCBjdXJyZW50IGRhdGVcbiAgICBjb25zdCB0cmlhbEVuZERhdGUgPSBuZXcgRGF0ZSh0cmlhbFN0YXJ0RGF0ZSk7XG4gICAgdHJpYWxFbmREYXRlLnNldERhdGUodHJpYWxFbmREYXRlLmdldERhdGUoKSArIDcpO1xuICAgIFxuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCB0cmlhbEFjdGl2ZSA9IGN1cnJlbnREYXRlIDwgdHJpYWxFbmREYXRlO1xuICAgIFxuICAgIGlmICghdHJpYWxBY3RpdmUpIHtcbiAgICAgIC8vIFRyaWFsIGhhcyBleHBpcmVkLCByZWRpcmVjdCB0byB1cGdyYWRlIHBhZ2VcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlZGlyZWN0OiB7XG4gICAgICAgICAgZGVzdGluYXRpb246ICcvdXBncmFkZScsXG4gICAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBkYXlzIHJlbWFpbmluZyBpbiB0cmlhbFxuICAgIGNvbnN0IGRpZmZUaW1lID0gdHJpYWxFbmREYXRlLmdldFRpbWUoKSAtIGN1cnJlbnREYXRlLmdldFRpbWUoKTtcbiAgICBjb25zdCBkaWZmRGF5cyA9IE1hdGguY2VpbChkaWZmVGltZSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSk7XG4gICAgY29uc3QgZGF5c1JlbWFpbmluZyA9IE1hdGgubWF4KDAsIGRpZmZEYXlzKTtcbiAgICBcbiAgICAvLyBUcmlhbCBpcyBhY3RpdmUsIGFsbG93IGFjY2VzcyB3aXRoIHRyaWFsIGluZm9cbiAgICByZXR1cm4geyBcbiAgICAgIHByb3BzOiB7IFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4uc2Vzc2lvbi51c2VyLFxuICAgICAgICAgIGlzU3Vic2NyaWJlZDogZmFsc2UsXG4gICAgICAgICAgdHJpYWxBY3RpdmU6IHRydWUsXG4gICAgICAgICAgdHJpYWxFbmREYXRlOiB0cmlhbEVuZERhdGUudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBkYXlzUmVtYWluaW5nXG4gICAgICAgIH0gXG4gICAgICB9IFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcmVxdWlyZUF1dGhlbnRpY2F0aW9uOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBPbiBlcnJvciwgZGVmYXVsdCB0byBhbGxvd2luZyBhY2Nlc3Mgd2l0aCB3YXJuaW5nXG4gICAgLy8gVGhpcyBwcmV2ZW50cyBsb2NrZWQtb3V0IHVzZXJzIGluIGNhc2Ugb2YgZGF0YWJhc2UgZXJyb3JzXG4gICAgcmV0dXJuIHsgXG4gICAgICBwcm9wczogeyBcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIC4uLnNlc3Npb24udXNlcixcbiAgICAgICAgICBpc1N1YnNjcmliZWQ6IGZhbHNlLFxuICAgICAgICAgIHRyaWFsQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIHRyaWFsU3RhdHVzOiAndW5rbm93bicsXG4gICAgICAgICAgZXJyb3I6ICdDb3VsZCBub3QgdmVyaWZ5IHN1YnNjcmlwdGlvbiBzdGF0dXMnXG4gICAgICAgIH0gXG4gICAgICB9IFxuICAgIH07XG4gIH1cbn0iXSwibmFtZXMiOlsiZ2V0U2Vzc2lvbiIsImJjcnlwdCIsImRiQ29ubmVjdCIsIlVzZXIiLCJoYXNoUGFzc3dvcmQiLCJwYXNzd29yZCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImhhc2hlZFBhc3N3b3JkIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsImNvbXBhcmUiLCJlcnJvciIsImdldFVzZXJCeUVtYWlsIiwiZW1haWwiLCJ1c2VyIiwiZmluZE9uZSIsIl9pZCIsIkVycm9yIiwibWVzc2FnZSIsImNyZWF0ZVVzZXIiLCJ1c2VyRGF0YSIsIm5hbWUiLCJ0cmlhbF9zdGFydF9kYXRlIiwiaXNfc3Vic2NyaWJlZCIsInRyaWFsU3RhcnREYXRlIiwiRGF0ZSIsInVzZXJEb2MiLCJzcGxpdCIsImNyZWF0ZWRBdCIsImxhc3RMb2dpbiIsIm5ld1VzZXIiLCJjcmVhdGUiLCJpZCIsInRvU3RyaW5nIiwiaXNBdXRoZW50aWNhdGVkIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsInN0YXR1cyIsImpzb24iLCJpc1RyaWFsQWN0aXZlIiwidXNlcklkIiwiZmluZEJ5SWQiLCJ0cmlhbEVuZERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImN1cnJlbnREYXRlIiwiZ2V0VHJpYWxTdGF0dXMiLCJpc0FjdGl2ZSIsImlzU3Vic2NyaWJlZCIsImRheXNSZW1haW5pbmciLCJkaWZmVGltZSIsImdldFRpbWUiLCJkaWZmRGF5cyIsIk1hdGgiLCJjZWlsIiwibWF4IiwidXBkYXRlU3Vic2NyaXB0aW9uU3RhdHVzIiwicmVzdWx0IiwidXBkYXRlT25lIiwiJHNldCIsIm1vZGlmaWVkQ291bnQiLCJyZXF1aXJlQXV0aGVudGljYXRpb24iLCJjb250ZXh0IiwicmVkaXJlY3QiLCJkZXN0aW5hdGlvbiIsInBlcm1hbmVudCIsInByb3BzIiwidHJpYWxBY3RpdmUiLCJ0b0lTT1N0cmluZyIsInRyaWFsU3RhdHVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/auth.js\n");

/***/ }),

/***/ "(api-node)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n// Check if we're on the client side\nconst isClient = \"undefined\" !== 'undefined';\n// Only access MONGODB_URI on the server side\nconst MONGODB_URI = !isClient ? process.env.MONGODB_URI : null;\n// Skip validation on client-side\nif (!isClient && !MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI\");\n}\n// Parse username from URI for logging purposes only\ntry {\n    if (MONGODB_URI.includes('@')) {\n        const credentialPart = MONGODB_URI.split('@')[0].split('//')[1];\n        if (credentialPart && credentialPart.includes(':')) {\n            const username = credentialPart.split(':')[0];\n            console.log(`Using MongoDB with username: ${username}`);\n        }\n    }\n} catch (error) {\n// Ignore parsing errors\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    // If we're on the client side, return a dummy connection that won't crash\n    if (isClient) {\n        console.log(\"Client-side MongoDB access attempted - using mock\");\n        return createMockMongoose();\n    }\n    if (cached.conn) {\n        console.log(\"Using cached database connection\");\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            // Use these options for more reliable connection\n            serverSelectionTimeoutMS: 5000,\n            connectTimeoutMS: 10000\n        };\n        console.log(\"Connecting to MongoDB...\");\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log(\"MongoDB connected successfully\");\n            return mongoose;\n        }).catch((error)=>{\n            console.error(\"MongoDB connection error:\", error);\n            // Return a \"mock mongoose\" that won't crash but won't do anything\n            // This allows the app to continue running without a database\n            return createMockMongoose();\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n        return cached.conn;\n    } catch (e) {\n        console.error(\"Error resolving MongoDB connection:\", e);\n        throw e;\n    }\n}\n// Creates a mock Mongoose that won't crash but won't do anything\n// Used as a fallback when MongoDB connection fails\nfunction createMockMongoose() {\n    console.warn(\"Using mock Mongoose (no database persistence)\");\n    // In-memory storage for collections\n    const collections = {};\n    // Initialize with empty collections\n    const knownCollections = [\n        'users',\n        'deals',\n        'accounts',\n        'User',\n        'Deal'\n    ];\n    knownCollections.forEach((name)=>{\n        collections[name] = [];\n    });\n    // Try to load from localStorage or global memory\n    if (false) {} else if (typeof global !== 'undefined' && global._localDbStorage) {\n        knownCollections.forEach((name)=>{\n            try {\n                const data = global._localDbStorage[`rehustle_${name}`];\n                if (data) {\n                    collections[name] = JSON.parse(data);\n                    console.log(`Loaded ${collections[name].length} items from server memory for ${name}`);\n                }\n            } catch (e) {\n                console.error(`Error loading ${name} from server memory:`, e);\n            }\n        });\n    }\n    // Save data helper\n    const saveCollection = (name, data)=>{\n        if (false) {} else if (typeof global !== 'undefined') {\n            if (!global._localDbStorage) {\n                global._localDbStorage = {};\n            }\n            global._localDbStorage[`rehustle_${name}`] = JSON.stringify(data);\n        }\n    };\n    // Create mock models for each known collection type\n    const mockModels = {};\n    knownCollections.forEach((name)=>{\n        // Create a basic model implementation\n        mockModels[name] = {\n            findOne: async (query)=>{\n                console.log(`[MockDB] findOne in ${name}:`, query);\n                const found = collections[name].find((doc)=>Object.entries(query).every(([key, value])=>doc[key] === value));\n                return found ? {\n                    ...found\n                } : null;\n            },\n            findById: async (id)=>{\n                console.log(`[MockDB] findById in ${name}:`, id);\n                const found = collections[name].find((doc)=>doc._id === id);\n                return found ? {\n                    ...found\n                } : null;\n            },\n            find: async (query)=>{\n                console.log(`[MockDB] find in ${name}:`, query);\n                return collections[name].filter((doc)=>Object.entries(query).every(([key, value])=>doc[key] === value));\n            },\n            create: async (data)=>{\n                console.log(`[MockDB] create in ${name}:`, data);\n                const _id = `mock_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`;\n                const newDoc = {\n                    ...data,\n                    _id\n                };\n                collections[name].push(newDoc);\n                saveCollection(name, collections[name]);\n                return {\n                    ...newDoc\n                };\n            },\n            findByIdAndUpdate: async (id, update, options)=>{\n                console.log(`[MockDB] findByIdAndUpdate in ${name}:`, id, update);\n                const index = collections[name].findIndex((doc)=>doc._id === id);\n                if (index === -1) {\n                    if (options?.upsert) {\n                        const newDoc = {\n                            ...update,\n                            _id: id\n                        };\n                        collections[name].push(newDoc);\n                        saveCollection(name, collections[name]);\n                        return newDoc;\n                    }\n                    return null;\n                }\n                // Apply updates\n                if (update.$set) {\n                    collections[name][index] = {\n                        ...collections[name][index],\n                        ...update.$set\n                    };\n                } else {\n                    // Direct update\n                    collections[name][index] = {\n                        ...collections[name][index],\n                        ...update\n                    };\n                }\n                saveCollection(name, collections[name]);\n                return {\n                    ...collections[name][index]\n                };\n            },\n            updateOne: async (filter, update)=>{\n                console.log(`[MockDB] updateOne in ${name}:`, filter, update);\n                const index = collections[name].findIndex((doc)=>Object.entries(filter).every(([key, value])=>doc[key] === value));\n                if (index !== -1) {\n                    if (update.$set) {\n                        collections[name][index] = {\n                            ...collections[name][index],\n                            ...update.$set\n                        };\n                    } else {\n                        collections[name][index] = {\n                            ...collections[name][index],\n                            ...update\n                        };\n                    }\n                    saveCollection(name, collections[name]);\n                    return {\n                        modifiedCount: 1,\n                        acknowledged: true\n                    };\n                }\n                return {\n                    modifiedCount: 0,\n                    acknowledged: true\n                };\n            },\n            deleteOne: async (filter)=>{\n                console.log(`[MockDB] deleteOne in ${name}:`, filter);\n                const initialLength = collections[name].length;\n                collections[name] = collections[name].filter((doc)=>!Object.entries(filter).every(([key, value])=>doc[key] === value));\n                if (initialLength !== collections[name].length) {\n                    saveCollection(name, collections[name]);\n                }\n                return {\n                    deletedCount: initialLength - collections[name].length,\n                    acknowledged: true\n                };\n            }\n        };\n    });\n    // Pre-initialize User model with test user data\n    if (collections['User'].length === 0) {\n        collections['User'].push({\n            _id: 'mock_test_user_id',\n            email: 'test@example.com',\n            password: 'password123',\n            name: 'Test User',\n            trial_start_date: new Date(),\n            is_subscribed: false,\n            createdAt: new Date()\n        });\n        saveCollection('User', collections['User']);\n    }\n    // Mock mongoose object with minimum required functionality\n    return {\n        // This is what we return from mongoose.connect()\n        connection: {\n            readyState: 1\n        },\n        models: mockModels,\n        model: (name, schema)=>{\n            // If model already exists, return it\n            if (mockModels[name]) {\n                return mockModels[name];\n            }\n            // Otherwise create a new one\n            if (!collections[name]) {\n                collections[name] = [];\n            }\n            // Create model and store in cache\n            mockModels[name] = {\n                findOne: async (query)=>{\n                    console.log(`[MockDB] findOne in ${name}:`, query);\n                    const found = collections[name].find((doc)=>Object.entries(query).every(([key, value])=>doc[key] === value));\n                    return found ? {\n                        ...found\n                    } : null;\n                },\n                findById: async (id)=>{\n                    console.log(`[MockDB] findById in ${name}:`, id);\n                    const found = collections[name].find((doc)=>doc._id === id);\n                    return found ? {\n                        ...found\n                    } : null;\n                },\n                find: async (query)=>{\n                    console.log(`[MockDB] find in ${name}:`, query);\n                    return collections[name].filter((doc)=>Object.entries(query).every(([key, value])=>doc[key] === value));\n                },\n                create: async (data)=>{\n                    console.log(`[MockDB] create in ${name}:`, data);\n                    const _id = `mock_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`;\n                    const newDoc = {\n                        ...data,\n                        _id\n                    };\n                    collections[name].push(newDoc);\n                    saveCollection(name, collections[name]);\n                    return {\n                        ...newDoc\n                    };\n                },\n                findByIdAndUpdate: async (id, update, options)=>{\n                    console.log(`[MockDB] findByIdAndUpdate in ${name}:`, id, update);\n                    const index = collections[name].findIndex((doc)=>doc._id === id);\n                    if (index === -1) {\n                        if (options?.upsert) {\n                            const newDoc = {\n                                ...update,\n                                _id: id\n                            };\n                            collections[name].push(newDoc);\n                            saveCollection(name, collections[name]);\n                            return newDoc;\n                        }\n                        return null;\n                    }\n                    // Apply updates\n                    if (update.$set) {\n                        collections[name][index] = {\n                            ...collections[name][index],\n                            ...update.$set\n                        };\n                    } else {\n                        // Direct update\n                        collections[name][index] = {\n                            ...collections[name][index],\n                            ...update\n                        };\n                    }\n                    saveCollection(name, collections[name]);\n                    return {\n                        ...collections[name][index]\n                    };\n                },\n                updateOne: async (filter, update)=>{\n                    console.log(`[MockDB] updateOne in ${name}:`, filter, update);\n                    const index = collections[name].findIndex((doc)=>Object.entries(filter).every(([key, value])=>doc[key] === value));\n                    if (index !== -1) {\n                        if (update.$set) {\n                            collections[name][index] = {\n                                ...collections[name][index],\n                                ...update.$set\n                            };\n                        } else {\n                            collections[name][index] = {\n                                ...collections[name][index],\n                                ...update\n                            };\n                        }\n                        saveCollection(name, collections[name]);\n                        return {\n                            modifiedCount: 1,\n                            acknowledged: true\n                        };\n                    }\n                    return {\n                        modifiedCount: 0,\n                        acknowledged: true\n                    };\n                },\n                deleteOne: async (filter)=>{\n                    console.log(`[MockDB] deleteOne in ${name}:`, filter);\n                    const initialLength = collections[name].length;\n                    collections[name] = collections[name].filter((doc)=>!Object.entries(filter).every(([key, value])=>doc[key] === value));\n                    if (initialLength !== collections[name].length) {\n                        saveCollection(name, collections[name]);\n                    }\n                    return {\n                        deletedCount: initialLength - collections[name].length,\n                        acknowledged: true\n                    };\n                }\n            };\n            return mockModels[name];\n        }\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FBY0QsZ0JBQWdCbEQsV0FBVyxDQUFDRyxLQUFLLENBQUNPLE1BQU07d0JBQUVzQyxjQUFjO29CQUFLO2dCQUN0RjtZQUNGO1lBRUEsT0FBT2pDLFVBQVUsQ0FBQ1osS0FBSztRQUN6QjtJQUNGO0FBQ0Y7QUFFQSxpRUFBZWQsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9saWIvbW9uZ29kYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbi8vIENoZWNrIGlmIHdlJ3JlIG9uIHRoZSBjbGllbnQgc2lkZVxuY29uc3QgaXNDbGllbnQgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJztcblxuLy8gT25seSBhY2Nlc3MgTU9OR09EQl9VUkkgb24gdGhlIHNlcnZlciBzaWRlXG5jb25zdCBNT05HT0RCX1VSSSA9ICFpc0NsaWVudCA/IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIDogbnVsbDtcblxuLy8gU2tpcCB2YWxpZGF0aW9uIG9uIGNsaWVudC1zaWRlXG5pZiAoIWlzQ2xpZW50ICYmICFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSVwiKTtcbn1cblxuLy8gUGFyc2UgdXNlcm5hbWUgZnJvbSBVUkkgZm9yIGxvZ2dpbmcgcHVycG9zZXMgb25seVxudHJ5IHtcbiAgaWYgKE1PTkdPREJfVVJJLmluY2x1ZGVzKCdAJykpIHtcbiAgICBjb25zdCBjcmVkZW50aWFsUGFydCA9IE1PTkdPREJfVVJJLnNwbGl0KCdAJylbMF0uc3BsaXQoJy8vJylbMV07XG4gICAgaWYgKGNyZWRlbnRpYWxQYXJ0ICYmIGNyZWRlbnRpYWxQYXJ0LmluY2x1ZGVzKCc6JykpIHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gY3JlZGVudGlhbFBhcnQuc3BsaXQoJzonKVswXTtcbiAgICAgIGNvbnNvbGUubG9nKGBVc2luZyBNb25nb0RCIHdpdGggdXNlcm5hbWU6ICR7dXNlcm5hbWV9YCk7XG4gICAgfVxuICB9XG59IGNhdGNoIChlcnJvcikge1xuICAvLyBJZ25vcmUgcGFyc2luZyBlcnJvcnNcbn1cblxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZTtcblxuaWYgKCFjYWNoZWQpIHtcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRiQ29ubmVjdCgpIHtcbiAgLy8gSWYgd2UncmUgb24gdGhlIGNsaWVudCBzaWRlLCByZXR1cm4gYSBkdW1teSBjb25uZWN0aW9uIHRoYXQgd29uJ3QgY3Jhc2hcbiAgaWYgKGlzQ2xpZW50KSB7XG4gICAgY29uc29sZS5sb2coXCJDbGllbnQtc2lkZSBNb25nb0RCIGFjY2VzcyBhdHRlbXB0ZWQgLSB1c2luZyBtb2NrXCIpO1xuICAgIHJldHVybiBjcmVhdGVNb2NrTW9uZ29vc2UoKTtcbiAgfVxuICBcbiAgaWYgKGNhY2hlZC5jb25uKSB7XG4gICAgY29uc29sZS5sb2coXCJVc2luZyBjYWNoZWQgZGF0YWJhc2UgY29ubmVjdGlvblwiKTtcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XG4gIH1cblxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSxcbiAgICAgIC8vIFVzZSB0aGVzZSBvcHRpb25zIGZvciBtb3JlIHJlbGlhYmxlIGNvbm5lY3Rpb25cbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCxcbiAgICAgIGNvbm5lY3RUaW1lb3V0TVM6IDEwMDAwLFxuICAgIH07XG5cbiAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3RpbmcgdG8gTW9uZ29EQi4uLlwiKTtcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpXG4gICAgICAudGhlbigobW9uZ29vc2UpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJNb25nb0RCIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgIHJldHVybiBtb25nb29zZTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgLy8gUmV0dXJuIGEgXCJtb2NrIG1vbmdvb3NlXCIgdGhhdCB3b24ndCBjcmFzaCBidXQgd29uJ3QgZG8gYW55dGhpbmdcbiAgICAgICAgLy8gVGhpcyBhbGxvd3MgdGhlIGFwcCB0byBjb250aW51ZSBydW5uaW5nIHdpdGhvdXQgYSBkYXRhYmFzZVxuICAgICAgICByZXR1cm4gY3JlYXRlTW9ja01vbmdvb3NlKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVzb2x2aW5nIE1vbmdvREIgY29ubmVjdGlvbjpcIiwgZSk7XG4gICAgdGhyb3cgZTtcbiAgfVxufVxuXG4vLyBDcmVhdGVzIGEgbW9jayBNb25nb29zZSB0aGF0IHdvbid0IGNyYXNoIGJ1dCB3b24ndCBkbyBhbnl0aGluZ1xuLy8gVXNlZCBhcyBhIGZhbGxiYWNrIHdoZW4gTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxzXG5mdW5jdGlvbiBjcmVhdGVNb2NrTW9uZ29vc2UoKSB7XG4gIGNvbnNvbGUud2FybihcIlVzaW5nIG1vY2sgTW9uZ29vc2UgKG5vIGRhdGFiYXNlIHBlcnNpc3RlbmNlKVwiKTtcbiAgXG4gIC8vIEluLW1lbW9yeSBzdG9yYWdlIGZvciBjb2xsZWN0aW9uc1xuICBjb25zdCBjb2xsZWN0aW9ucyA9IHt9O1xuICBcbiAgLy8gSW5pdGlhbGl6ZSB3aXRoIGVtcHR5IGNvbGxlY3Rpb25zXG4gIGNvbnN0IGtub3duQ29sbGVjdGlvbnMgPSBbJ3VzZXJzJywgJ2RlYWxzJywgJ2FjY291bnRzJywgJ1VzZXInLCAnRGVhbCddO1xuICBrbm93bkNvbGxlY3Rpb25zLmZvckVhY2gobmFtZSA9PiB7XG4gICAgY29sbGVjdGlvbnNbbmFtZV0gPSBbXTtcbiAgfSk7XG4gIFxuICAvLyBUcnkgdG8gbG9hZCBmcm9tIGxvY2FsU3RvcmFnZSBvciBnbG9iYWwgbWVtb3J5XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAga25vd25Db2xsZWN0aW9ucy5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGByZWh1c3RsZV8ke25hbWV9YCk7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgY29sbGVjdGlvbnNbbmFtZV0gPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBMb2FkZWQgJHtjb2xsZWN0aW9uc1tuYW1lXS5sZW5ndGh9IGl0ZW1zIGZyb20gbG9jYWxTdG9yYWdlIGZvciAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyAke25hbWV9IGZyb20gbG9jYWxTdG9yYWdlOmAsIGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbC5fbG9jYWxEYlN0b3JhZ2UpIHtcbiAgICBrbm93bkNvbGxlY3Rpb25zLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gZ2xvYmFsLl9sb2NhbERiU3RvcmFnZVtgcmVodXN0bGVfJHtuYW1lfWBdO1xuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgIGNvbGxlY3Rpb25zW25hbWVdID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTG9hZGVkICR7Y29sbGVjdGlvbnNbbmFtZV0ubGVuZ3RofSBpdGVtcyBmcm9tIHNlcnZlciBtZW1vcnkgZm9yICR7bmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBsb2FkaW5nICR7bmFtZX0gZnJvbSBzZXJ2ZXIgbWVtb3J5OmAsIGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICAvLyBTYXZlIGRhdGEgaGVscGVyXG4gIGNvbnN0IHNhdmVDb2xsZWN0aW9uID0gKG5hbWUsIGRhdGEpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oYHJlaHVzdGxlXyR7bmFtZX1gLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKCFnbG9iYWwuX2xvY2FsRGJTdG9yYWdlKSB7XG4gICAgICAgIGdsb2JhbC5fbG9jYWxEYlN0b3JhZ2UgPSB7fTtcbiAgICAgIH1cbiAgICAgIGdsb2JhbC5fbG9jYWxEYlN0b3JhZ2VbYHJlaHVzdGxlXyR7bmFtZX1gXSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8vIENyZWF0ZSBtb2NrIG1vZGVscyBmb3IgZWFjaCBrbm93biBjb2xsZWN0aW9uIHR5cGVcbiAgY29uc3QgbW9ja01vZGVscyA9IHt9O1xuICBrbm93bkNvbGxlY3Rpb25zLmZvckVhY2gobmFtZSA9PiB7XG4gICAgLy8gQ3JlYXRlIGEgYmFzaWMgbW9kZWwgaW1wbGVtZW50YXRpb25cbiAgICBtb2NrTW9kZWxzW25hbWVdID0ge1xuICAgICAgZmluZE9uZTogYXN5bmMgKHF1ZXJ5KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTW9ja0RCXSBmaW5kT25lIGluICR7bmFtZX06YCwgcXVlcnkpO1xuICAgICAgICBjb25zdCBmb3VuZCA9IGNvbGxlY3Rpb25zW25hbWVdLmZpbmQoZG9jID0+IFxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiBkb2Nba2V5XSA9PT0gdmFsdWUpXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBmb3VuZCA/IHsuLi5mb3VuZH0gOiBudWxsO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgZmluZEJ5SWQ6IGFzeW5jIChpZCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgW01vY2tEQl0gZmluZEJ5SWQgaW4gJHtuYW1lfTpgLCBpZCk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gY29sbGVjdGlvbnNbbmFtZV0uZmluZChkb2MgPT4gZG9jLl9pZCA9PT0gaWQpO1xuICAgICAgICByZXR1cm4gZm91bmQgPyB7Li4uZm91bmR9IDogbnVsbDtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGZpbmQ6IGFzeW5jIChxdWVyeSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgW01vY2tEQl0gZmluZCBpbiAke25hbWV9OmAsIHF1ZXJ5KTtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25zW25hbWVdLmZpbHRlcihkb2MgPT5cbiAgICAgICAgICBPYmplY3QuZW50cmllcyhxdWVyeSkuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4gZG9jW2tleV0gPT09IHZhbHVlKVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgY3JlYXRlOiBhc3luYyAoZGF0YSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgW01vY2tEQl0gY3JlYXRlIGluICR7bmFtZX06YCwgZGF0YSk7XG4gICAgICAgIGNvbnN0IF9pZCA9IGBtb2NrXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCl9YDtcbiAgICAgICAgY29uc3QgbmV3RG9jID0geyAuLi5kYXRhLCBfaWQgfTtcbiAgICAgICAgY29sbGVjdGlvbnNbbmFtZV0ucHVzaChuZXdEb2MpO1xuICAgICAgICBzYXZlQ29sbGVjdGlvbihuYW1lLCBjb2xsZWN0aW9uc1tuYW1lXSk7XG4gICAgICAgIHJldHVybiB7IC4uLm5ld0RvYyB9O1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgZmluZEJ5SWRBbmRVcGRhdGU6IGFzeW5jIChpZCwgdXBkYXRlLCBvcHRpb25zKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTW9ja0RCXSBmaW5kQnlJZEFuZFVwZGF0ZSBpbiAke25hbWV9OmAsIGlkLCB1cGRhdGUpO1xuICAgICAgICBjb25zdCBpbmRleCA9IGNvbGxlY3Rpb25zW25hbWVdLmZpbmRJbmRleChkb2MgPT4gZG9jLl9pZCA9PT0gaWQpO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnM/LnVwc2VydCkge1xuICAgICAgICAgICAgY29uc3QgbmV3RG9jID0geyAuLi51cGRhdGUsIF9pZDogaWQgfTtcbiAgICAgICAgICAgIGNvbGxlY3Rpb25zW25hbWVdLnB1c2gobmV3RG9jKTtcbiAgICAgICAgICAgIHNhdmVDb2xsZWN0aW9uKG5hbWUsIGNvbGxlY3Rpb25zW25hbWVdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXdEb2M7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBcHBseSB1cGRhdGVzXG4gICAgICAgIGlmICh1cGRhdGUuJHNldCkge1xuICAgICAgICAgIGNvbGxlY3Rpb25zW25hbWVdW2luZGV4XSA9IHsgLi4uY29sbGVjdGlvbnNbbmFtZV1baW5kZXhdLCAuLi51cGRhdGUuJHNldCB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIERpcmVjdCB1cGRhdGVcbiAgICAgICAgICBjb2xsZWN0aW9uc1tuYW1lXVtpbmRleF0gPSB7IC4uLmNvbGxlY3Rpb25zW25hbWVdW2luZGV4XSwgLi4udXBkYXRlIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNhdmVDb2xsZWN0aW9uKG5hbWUsIGNvbGxlY3Rpb25zW25hbWVdKTtcbiAgICAgICAgcmV0dXJuIHsgLi4uY29sbGVjdGlvbnNbbmFtZV1baW5kZXhdIH07XG4gICAgICB9LFxuICAgICAgXG4gICAgICB1cGRhdGVPbmU6IGFzeW5jIChmaWx0ZXIsIHVwZGF0ZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgW01vY2tEQl0gdXBkYXRlT25lIGluICR7bmFtZX06YCwgZmlsdGVyLCB1cGRhdGUpO1xuICAgICAgICBjb25zdCBpbmRleCA9IGNvbGxlY3Rpb25zW25hbWVdLmZpbmRJbmRleChkb2MgPT4gXG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZmlsdGVyKS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiBkb2Nba2V5XSA9PT0gdmFsdWUpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgaWYgKHVwZGF0ZS4kc2V0KSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uc1tuYW1lXVtpbmRleF0gPSB7IC4uLmNvbGxlY3Rpb25zW25hbWVdW2luZGV4XSwgLi4udXBkYXRlLiRzZXQgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29sbGVjdGlvbnNbbmFtZV1baW5kZXhdID0geyAuLi5jb2xsZWN0aW9uc1tuYW1lXVtpbmRleF0sIC4uLnVwZGF0ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBzYXZlQ29sbGVjdGlvbihuYW1lLCBjb2xsZWN0aW9uc1tuYW1lXSk7XG4gICAgICAgICAgcmV0dXJuIHsgbW9kaWZpZWRDb3VudDogMSwgYWNrbm93bGVkZ2VkOiB0cnVlIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IG1vZGlmaWVkQ291bnQ6IDAsIGFja25vd2xlZGdlZDogdHJ1ZSB9O1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgZGVsZXRlT25lOiBhc3luYyAoZmlsdGVyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBbTW9ja0RCXSBkZWxldGVPbmUgaW4gJHtuYW1lfTpgLCBmaWx0ZXIpO1xuICAgICAgICBjb25zdCBpbml0aWFsTGVuZ3RoID0gY29sbGVjdGlvbnNbbmFtZV0ubGVuZ3RoO1xuICAgICAgICBjb2xsZWN0aW9uc1tuYW1lXSA9IGNvbGxlY3Rpb25zW25hbWVdLmZpbHRlcihkb2MgPT4gXG4gICAgICAgICAgIU9iamVjdC5lbnRyaWVzKGZpbHRlcikuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4gZG9jW2tleV0gPT09IHZhbHVlKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGluaXRpYWxMZW5ndGggIT09IGNvbGxlY3Rpb25zW25hbWVdLmxlbmd0aCkge1xuICAgICAgICAgIHNhdmVDb2xsZWN0aW9uKG5hbWUsIGNvbGxlY3Rpb25zW25hbWVdKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgZGVsZXRlZENvdW50OiBpbml0aWFsTGVuZ3RoIC0gY29sbGVjdGlvbnNbbmFtZV0ubGVuZ3RoLCBhY2tub3dsZWRnZWQ6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgXG4gIC8vIFByZS1pbml0aWFsaXplIFVzZXIgbW9kZWwgd2l0aCB0ZXN0IHVzZXIgZGF0YVxuICBpZiAoY29sbGVjdGlvbnNbJ1VzZXInXS5sZW5ndGggPT09IDApIHtcbiAgICBjb2xsZWN0aW9uc1snVXNlciddLnB1c2goe1xuICAgICAgX2lkOiAnbW9ja190ZXN0X3VzZXJfaWQnLFxuICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnLFxuICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICB0cmlhbF9zdGFydF9kYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgaXNfc3Vic2NyaWJlZDogZmFsc2UsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICB9KTtcbiAgICBzYXZlQ29sbGVjdGlvbignVXNlcicsIGNvbGxlY3Rpb25zWydVc2VyJ10pO1xuICB9XG4gIFxuICAvLyBNb2NrIG1vbmdvb3NlIG9iamVjdCB3aXRoIG1pbmltdW0gcmVxdWlyZWQgZnVuY3Rpb25hbGl0eVxuICByZXR1cm4ge1xuICAgIC8vIFRoaXMgaXMgd2hhdCB3ZSByZXR1cm4gZnJvbSBtb25nb29zZS5jb25uZWN0KClcbiAgICBjb25uZWN0aW9uOiB7XG4gICAgICByZWFkeVN0YXRlOiAxLCAvLyBDb25uZWN0ZWRcbiAgICB9LFxuICAgIG1vZGVsczogbW9ja01vZGVscyxcbiAgICBtb2RlbDogKG5hbWUsIHNjaGVtYSkgPT4ge1xuICAgICAgLy8gSWYgbW9kZWwgYWxyZWFkeSBleGlzdHMsIHJldHVybiBpdFxuICAgICAgaWYgKG1vY2tNb2RlbHNbbmFtZV0pIHtcbiAgICAgICAgcmV0dXJuIG1vY2tNb2RlbHNbbmFtZV07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgb25lXG4gICAgICBpZiAoIWNvbGxlY3Rpb25zW25hbWVdKSB7XG4gICAgICAgIGNvbGxlY3Rpb25zW25hbWVdID0gW107XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBtb2RlbCBhbmQgc3RvcmUgaW4gY2FjaGVcbiAgICAgIG1vY2tNb2RlbHNbbmFtZV0gPSB7XG4gICAgICAgIGZpbmRPbmU6IGFzeW5jIChxdWVyeSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbTW9ja0RCXSBmaW5kT25lIGluICR7bmFtZX06YCwgcXVlcnkpO1xuICAgICAgICAgIGNvbnN0IGZvdW5kID0gY29sbGVjdGlvbnNbbmFtZV0uZmluZChkb2MgPT4gXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhxdWVyeSkuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4gZG9jW2tleV0gPT09IHZhbHVlKVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGZvdW5kID8gey4uLmZvdW5kfSA6IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBmaW5kQnlJZDogYXN5bmMgKGlkKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtNb2NrREJdIGZpbmRCeUlkIGluICR7bmFtZX06YCwgaWQpO1xuICAgICAgICAgIGNvbnN0IGZvdW5kID0gY29sbGVjdGlvbnNbbmFtZV0uZmluZChkb2MgPT4gZG9jLl9pZCA9PT0gaWQpO1xuICAgICAgICAgIHJldHVybiBmb3VuZCA/IHsuLi5mb3VuZH0gOiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgZmluZDogYXN5bmMgKHF1ZXJ5KSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFtNb2NrREJdIGZpbmQgaW4gJHtuYW1lfTpgLCBxdWVyeSk7XG4gICAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb25zW25hbWVdLmZpbHRlcihkb2MgPT5cbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiBkb2Nba2V5XSA9PT0gdmFsdWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGNyZWF0ZTogYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW01vY2tEQl0gY3JlYXRlIGluICR7bmFtZX06YCwgZGF0YSk7XG4gICAgICAgICAgY29uc3QgX2lkID0gYG1vY2tfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KX1gO1xuICAgICAgICAgIGNvbnN0IG5ld0RvYyA9IHsgLi4uZGF0YSwgX2lkIH07XG4gICAgICAgICAgY29sbGVjdGlvbnNbbmFtZV0ucHVzaChuZXdEb2MpO1xuICAgICAgICAgIHNhdmVDb2xsZWN0aW9uKG5hbWUsIGNvbGxlY3Rpb25zW25hbWVdKTtcbiAgICAgICAgICByZXR1cm4geyAuLi5uZXdEb2MgfTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGZpbmRCeUlkQW5kVXBkYXRlOiBhc3luYyAoaWQsIHVwZGF0ZSwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbTW9ja0RCXSBmaW5kQnlJZEFuZFVwZGF0ZSBpbiAke25hbWV9OmAsIGlkLCB1cGRhdGUpO1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gY29sbGVjdGlvbnNbbmFtZV0uZmluZEluZGV4KGRvYyA9PiBkb2MuX2lkID09PSBpZCk7XG4gICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnVwc2VydCkge1xuICAgICAgICAgICAgICBjb25zdCBuZXdEb2MgPSB7IC4uLnVwZGF0ZSwgX2lkOiBpZCB9O1xuICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tuYW1lXS5wdXNoKG5ld0RvYyk7XG4gICAgICAgICAgICAgIHNhdmVDb2xsZWN0aW9uKG5hbWUsIGNvbGxlY3Rpb25zW25hbWVdKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5ld0RvYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBcHBseSB1cGRhdGVzXG4gICAgICAgICAgaWYgKHVwZGF0ZS4kc2V0KSB7XG4gICAgICAgICAgICBjb2xsZWN0aW9uc1tuYW1lXVtpbmRleF0gPSB7IC4uLmNvbGxlY3Rpb25zW25hbWVdW2luZGV4XSwgLi4udXBkYXRlLiRzZXQgfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRGlyZWN0IHVwZGF0ZVxuICAgICAgICAgICAgY29sbGVjdGlvbnNbbmFtZV1baW5kZXhdID0geyAuLi5jb2xsZWN0aW9uc1tuYW1lXVtpbmRleF0sIC4uLnVwZGF0ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBzYXZlQ29sbGVjdGlvbihuYW1lLCBjb2xsZWN0aW9uc1tuYW1lXSk7XG4gICAgICAgICAgcmV0dXJuIHsgLi4uY29sbGVjdGlvbnNbbmFtZV1baW5kZXhdIH07XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICB1cGRhdGVPbmU6IGFzeW5jIChmaWx0ZXIsIHVwZGF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbTW9ja0RCXSB1cGRhdGVPbmUgaW4gJHtuYW1lfTpgLCBmaWx0ZXIsIHVwZGF0ZSk7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBjb2xsZWN0aW9uc1tuYW1lXS5maW5kSW5kZXgoZG9jID0+IFxuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZmlsdGVyKS5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiBkb2Nba2V5XSA9PT0gdmFsdWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBpZiAodXBkYXRlLiRzZXQpIHtcbiAgICAgICAgICAgICAgY29sbGVjdGlvbnNbbmFtZV1baW5kZXhdID0geyAuLi5jb2xsZWN0aW9uc1tuYW1lXVtpbmRleF0sIC4uLnVwZGF0ZS4kc2V0IH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb2xsZWN0aW9uc1tuYW1lXVtpbmRleF0gPSB7IC4uLmNvbGxlY3Rpb25zW25hbWVdW2luZGV4XSwgLi4udXBkYXRlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzYXZlQ29sbGVjdGlvbihuYW1lLCBjb2xsZWN0aW9uc1tuYW1lXSk7XG4gICAgICAgICAgICByZXR1cm4geyBtb2RpZmllZENvdW50OiAxLCBhY2tub3dsZWRnZWQ6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHsgbW9kaWZpZWRDb3VudDogMCwgYWNrbm93bGVkZ2VkOiB0cnVlIH07XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBkZWxldGVPbmU6IGFzeW5jIChmaWx0ZXIpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW01vY2tEQl0gZGVsZXRlT25lIGluICR7bmFtZX06YCwgZmlsdGVyKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsTGVuZ3RoID0gY29sbGVjdGlvbnNbbmFtZV0ubGVuZ3RoO1xuICAgICAgICAgIGNvbGxlY3Rpb25zW25hbWVdID0gY29sbGVjdGlvbnNbbmFtZV0uZmlsdGVyKGRvYyA9PiBcbiAgICAgICAgICAgICFPYmplY3QuZW50cmllcyhmaWx0ZXIpLmV2ZXJ5KChba2V5LCB2YWx1ZV0pID0+IGRvY1trZXldID09PSB2YWx1ZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChpbml0aWFsTGVuZ3RoICE9PSBjb2xsZWN0aW9uc1tuYW1lXS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNhdmVDb2xsZWN0aW9uKG5hbWUsIGNvbGxlY3Rpb25zW25hbWVdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHsgZGVsZXRlZENvdW50OiBpbml0aWFsTGVuZ3RoIC0gY29sbGVjdGlvbnNbbmFtZV0ubGVuZ3RoLCBhY2tub3dsZWRnZWQ6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgcmV0dXJuIG1vY2tNb2RlbHNbbmFtZV07XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBkYkNvbm5lY3Q7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiaXNDbGllbnQiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImluY2x1ZGVzIiwiY3JlZGVudGlhbFBhcnQiLCJzcGxpdCIsInVzZXJuYW1lIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJjcmVhdGVNb2NrTW9uZ29vc2UiLCJvcHRzIiwiYnVmZmVyQ29tbWFuZHMiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJjb25uZWN0VGltZW91dE1TIiwiY29ubmVjdCIsInRoZW4iLCJjYXRjaCIsImUiLCJ3YXJuIiwiY29sbGVjdGlvbnMiLCJrbm93bkNvbGxlY3Rpb25zIiwiZm9yRWFjaCIsIm5hbWUiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJkYXRhIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsImxlbmd0aCIsIl9sb2NhbERiU3RvcmFnZSIsInNhdmVDb2xsZWN0aW9uIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsIm1vY2tNb2RlbHMiLCJmaW5kT25lIiwicXVlcnkiLCJmb3VuZCIsImZpbmQiLCJkb2MiLCJPYmplY3QiLCJlbnRyaWVzIiwiZXZlcnkiLCJrZXkiLCJ2YWx1ZSIsImZpbmRCeUlkIiwiaWQiLCJfaWQiLCJmaWx0ZXIiLCJjcmVhdGUiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwibmV3RG9jIiwicHVzaCIsImZpbmRCeUlkQW5kVXBkYXRlIiwidXBkYXRlIiwib3B0aW9ucyIsImluZGV4IiwiZmluZEluZGV4IiwidXBzZXJ0IiwiJHNldCIsInVwZGF0ZU9uZSIsIm1vZGlmaWVkQ291bnQiLCJhY2tub3dsZWRnZWQiLCJkZWxldGVPbmUiLCJpbml0aWFsTGVuZ3RoIiwiZGVsZXRlZENvdW50IiwiZW1haWwiLCJwYXNzd29yZCIsInRyaWFsX3N0YXJ0X2RhdGUiLCJpc19zdWJzY3JpYmVkIiwiY3JlYXRlZEF0IiwiY29ubmVjdGlvbiIsInJlYWR5U3RhdGUiLCJtb2RlbHMiLCJtb2RlbCIsInNjaGVtYSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./lib/mongodb.js\n");

/***/ }),

/***/ "(api-node)/./models/Deal.js":
/*!************************!*\
  !*** ./models/Deal.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst DealSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    // Define userId as String type and explicitly tell Mongoose not to try casting it\n    userId: {\n        type: String,\n        required: true,\n        get: (v)=>String(v),\n        set: (v)=>String(v)\n    },\n    property_type: String,\n    sniper_score: Number,\n    risk_level: String,\n    recommended_offer: Number,\n    notes: String,\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: true,\n    // Add _id: false to the schema options if we're explicitly setting IDs\n    toObject: {\n        getters: true\n    },\n    toJSON: {\n        getters: true\n    }\n});\n// Force Mongoose to use plain strings for userId\nDealSchema.path('userId').validate(function(value) {\n    // Always store as string\n    return typeof value === 'string';\n}, 'userId must be a string');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Deal || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Deal\", DealSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vZGVscy9EZWFsLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxhQUFhLElBQUlELHdEQUFlLENBQUM7SUFDckMsa0ZBQWtGO0lBQ2xGRyxRQUFRO1FBQ05DLE1BQU1DO1FBQ05DLFVBQVU7UUFDVkMsS0FBS0MsQ0FBQUEsSUFBS0gsT0FBT0c7UUFDakJDLEtBQUtELENBQUFBLElBQUtILE9BQU9HO0lBQ25CO0lBQ0FFLGVBQWVMO0lBQ2ZNLGNBQWNDO0lBQ2RDLFlBQVlSO0lBQ1pTLG1CQUFtQkY7SUFDbkJHLE9BQU9WO0lBQ1BXLFdBQVc7UUFBRVosTUFBTWE7UUFBTUMsU0FBU0QsS0FBS0UsR0FBRztJQUFDO0FBQzdDLEdBQUc7SUFDREMsWUFBWTtJQUNaLHVFQUF1RTtJQUN2RUMsVUFBVTtRQUFFQyxTQUFTO0lBQUs7SUFDMUJDLFFBQVE7UUFBRUQsU0FBUztJQUFLO0FBQzFCO0FBRUEsaURBQWlEO0FBQ2pEckIsV0FBV3VCLElBQUksQ0FBQyxVQUFVQyxRQUFRLENBQUMsU0FBU0MsS0FBSztJQUMvQyx5QkFBeUI7SUFDekIsT0FBTyxPQUFPQSxVQUFVO0FBQzFCLEdBQUc7QUFFSCxpRUFBZTFCLHdEQUFlLENBQUM0QixJQUFJLElBQUk1QixxREFBYyxDQUFDLFFBQVFDLFdBQVdBLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvbW9kZWxzL0RlYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBEZWFsU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIC8vIERlZmluZSB1c2VySWQgYXMgU3RyaW5nIHR5cGUgYW5kIGV4cGxpY2l0bHkgdGVsbCBNb25nb29zZSBub3QgdG8gdHJ5IGNhc3RpbmcgaXRcbiAgdXNlcklkOiB7IFxuICAgIHR5cGU6IFN0cmluZywgXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgZ2V0OiB2ID0+IFN0cmluZyh2KSxcbiAgICBzZXQ6IHYgPT4gU3RyaW5nKHYpXG4gIH0sXG4gIHByb3BlcnR5X3R5cGU6IFN0cmluZyxcbiAgc25pcGVyX3Njb3JlOiBOdW1iZXIsXG4gIHJpc2tfbGV2ZWw6IFN0cmluZyxcbiAgcmVjb21tZW5kZWRfb2ZmZXI6IE51bWJlcixcbiAgbm90ZXM6IFN0cmluZyxcbiAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXG59LCB7IFxuICB0aW1lc3RhbXBzOiB0cnVlLFxuICAvLyBBZGQgX2lkOiBmYWxzZSB0byB0aGUgc2NoZW1hIG9wdGlvbnMgaWYgd2UncmUgZXhwbGljaXRseSBzZXR0aW5nIElEc1xuICB0b09iamVjdDogeyBnZXR0ZXJzOiB0cnVlIH0sXG4gIHRvSlNPTjogeyBnZXR0ZXJzOiB0cnVlIH1cbn0pO1xuXG4vLyBGb3JjZSBNb25nb29zZSB0byB1c2UgcGxhaW4gc3RyaW5ncyBmb3IgdXNlcklkXG5EZWFsU2NoZW1hLnBhdGgoJ3VzZXJJZCcpLnZhbGlkYXRlKGZ1bmN0aW9uKHZhbHVlKSB7XG4gIC8vIEFsd2F5cyBzdG9yZSBhcyBzdHJpbmdcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZyc7XG59LCAndXNlcklkIG11c3QgYmUgYSBzdHJpbmcnKTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLkRlYWwgfHwgbW9uZ29vc2UubW9kZWwoXCJEZWFsXCIsIERlYWxTY2hlbWEpOyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIkRlYWxTY2hlbWEiLCJTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJnZXQiLCJ2Iiwic2V0IiwicHJvcGVydHlfdHlwZSIsInNuaXBlcl9zY29yZSIsIk51bWJlciIsInJpc2tfbGV2ZWwiLCJyZWNvbW1lbmRlZF9vZmZlciIsIm5vdGVzIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImRlZmF1bHQiLCJub3ciLCJ0aW1lc3RhbXBzIiwidG9PYmplY3QiLCJnZXR0ZXJzIiwidG9KU09OIiwicGF0aCIsInZhbGlkYXRlIiwidmFsdWUiLCJtb2RlbHMiLCJEZWFsIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./models/Deal.js\n");

/***/ }),

/***/ "(api-node)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\n// Check if we're on the client side\nconst isClient = \"undefined\" !== 'undefined';\n// Create a mock model for client-side rendering\nconst createMockUserModel = ()=>{\n    console.log(\"Creating mock User model for client-side\");\n    // Return a minimal User model that won't cause errors client-side\n    return {\n        findOne: async ()=>null,\n        findById: async ()=>null,\n        find: async ()=>[],\n        create: async (data)=>({\n                ...data,\n                _id: 'mock_id'\n            }),\n        updateOne: async ()=>({\n                modifiedCount: 0\n            }),\n        deleteOne: async ()=>({\n                deletedCount: 0\n            })\n    };\n};\n// Only define the schema on the server-side\nlet UserModel;\nif (!isClient) {\n    // Server-side model creation\n    const UserSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n        email: {\n            type: String,\n            required: true,\n            unique: true\n        },\n        password: String,\n        name: String,\n        trial_start_date: Date,\n        is_subscribed: {\n            type: Boolean,\n            default: false\n        },\n        lifetime_access: {\n            type: Boolean,\n            default: false\n        },\n        createdAt: {\n            type: Date,\n            default: Date.now\n        },\n        lastLogin: {\n            type: Date,\n            default: Date.now\n        }\n    });\n    // Use existing model or create new one\n    UserModel = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", UserSchema);\n} else {\n    // Client-side mock model\n    UserModel = createMockUserModel();\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserModel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL21vZGVscy9Vc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxvQ0FBb0M7QUFDcEMsTUFBTUMsV0FBVyxnQkFBa0I7QUFFbkMsZ0RBQWdEO0FBQ2hELE1BQU1DLHNCQUFzQjtJQUMxQkMsUUFBUUMsR0FBRyxDQUFDO0lBRVosa0VBQWtFO0lBQ2xFLE9BQU87UUFDTEMsU0FBUyxVQUFZO1FBQ3JCQyxVQUFVLFVBQVk7UUFDdEJDLE1BQU0sVUFBWSxFQUFFO1FBQ3BCQyxRQUFRLE9BQU9DLE9BQVU7Z0JBQUUsR0FBR0EsSUFBSTtnQkFBRUMsS0FBSztZQUFVO1FBQ25EQyxXQUFXLFVBQWE7Z0JBQUVDLGVBQWU7WUFBRTtRQUMzQ0MsV0FBVyxVQUFhO2dCQUFFQyxjQUFjO1lBQUU7SUFDNUM7QUFDRjtBQUVBLDRDQUE0QztBQUM1QyxJQUFJQztBQUVKLElBQUksQ0FBQ2QsVUFBVTtJQUNiLDZCQUE2QjtJQUM3QixNQUFNZSxhQUFhLElBQUloQix3REFBZSxDQUFDO1FBQ3JDa0IsT0FBTztZQUFFQyxNQUFNQztZQUFRQyxVQUFVO1lBQU1DLFFBQVE7UUFBSztRQUNwREMsVUFBVUg7UUFDVkksTUFBTUo7UUFDTkssa0JBQWtCQztRQUNsQkMsZUFBZTtZQUFFUixNQUFNUztZQUFTQyxTQUFTO1FBQU07UUFDL0NDLGlCQUFpQjtZQUFFWCxNQUFNUztZQUFTQyxTQUFTO1FBQU07UUFDakRFLFdBQVc7WUFBRVosTUFBTU87WUFBTUcsU0FBU0gsS0FBS00sR0FBRztRQUFDO1FBQzNDQyxXQUFXO1lBQUVkLE1BQU1PO1lBQU1HLFNBQVNILEtBQUtNLEdBQUc7UUFBQztJQUM3QztJQUVBLHVDQUF1QztJQUN2Q2pCLFlBQVlmLHdEQUFlLENBQUNtQyxJQUFJLElBQUluQyxxREFBYyxDQUFDLFFBQVFnQjtBQUM3RCxPQUFPO0lBQ0wseUJBQXlCO0lBQ3pCRCxZQUFZYjtBQUNkO0FBRUEsaUVBQWVhLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvbW9kZWxzL1VzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG4vLyBDaGVjayBpZiB3ZSdyZSBvbiB0aGUgY2xpZW50IHNpZGVcbmNvbnN0IGlzQ2xpZW50ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8vIENyZWF0ZSBhIG1vY2sgbW9kZWwgZm9yIGNsaWVudC1zaWRlIHJlbmRlcmluZ1xuY29uc3QgY3JlYXRlTW9ja1VzZXJNb2RlbCA9ICgpID0+IHtcbiAgY29uc29sZS5sb2coXCJDcmVhdGluZyBtb2NrIFVzZXIgbW9kZWwgZm9yIGNsaWVudC1zaWRlXCIpO1xuICBcbiAgLy8gUmV0dXJuIGEgbWluaW1hbCBVc2VyIG1vZGVsIHRoYXQgd29uJ3QgY2F1c2UgZXJyb3JzIGNsaWVudC1zaWRlXG4gIHJldHVybiB7XG4gICAgZmluZE9uZTogYXN5bmMgKCkgPT4gbnVsbCxcbiAgICBmaW5kQnlJZDogYXN5bmMgKCkgPT4gbnVsbCxcbiAgICBmaW5kOiBhc3luYyAoKSA9PiBbXSxcbiAgICBjcmVhdGU6IGFzeW5jIChkYXRhKSA9PiAoeyAuLi5kYXRhLCBfaWQ6ICdtb2NrX2lkJyB9KSxcbiAgICB1cGRhdGVPbmU6IGFzeW5jICgpID0+ICh7IG1vZGlmaWVkQ291bnQ6IDAgfSksXG4gICAgZGVsZXRlT25lOiBhc3luYyAoKSA9PiAoeyBkZWxldGVkQ291bnQ6IDAgfSlcbiAgfTtcbn07XG5cbi8vIE9ubHkgZGVmaW5lIHRoZSBzY2hlbWEgb24gdGhlIHNlcnZlci1zaWRlXG5sZXQgVXNlck1vZGVsO1xuXG5pZiAoIWlzQ2xpZW50KSB7XG4gIC8vIFNlcnZlci1zaWRlIG1vZGVsIGNyZWF0aW9uXG4gIGNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgICBlbWFpbDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUgfSxcbiAgICBwYXNzd29yZDogU3RyaW5nLFxuICAgIG5hbWU6IFN0cmluZyxcbiAgICB0cmlhbF9zdGFydF9kYXRlOiBEYXRlLFxuICAgIGlzX3N1YnNjcmliZWQ6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBsaWZldGltZV9hY2Nlc3M6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbiAgICBsYXN0TG9naW46IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfVxuICB9KTtcblxuICAvLyBVc2UgZXhpc3RpbmcgbW9kZWwgb3IgY3JlYXRlIG5ldyBvbmVcbiAgVXNlck1vZGVsID0gbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIFVzZXJTY2hlbWEpO1xufSBlbHNlIHtcbiAgLy8gQ2xpZW50LXNpZGUgbW9jayBtb2RlbFxuICBVc2VyTW9kZWwgPSBjcmVhdGVNb2NrVXNlck1vZGVsKCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJNb2RlbDsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJpc0NsaWVudCIsImNyZWF0ZU1vY2tVc2VyTW9kZWwiLCJjb25zb2xlIiwibG9nIiwiZmluZE9uZSIsImZpbmRCeUlkIiwiZmluZCIsImNyZWF0ZSIsImRhdGEiLCJfaWQiLCJ1cGRhdGVPbmUiLCJtb2RpZmllZENvdW50IiwiZGVsZXRlT25lIiwiZGVsZXRlZENvdW50IiwiVXNlck1vZGVsIiwiVXNlclNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwicGFzc3dvcmQiLCJuYW1lIiwidHJpYWxfc3RhcnRfZGF0ZSIsIkRhdGUiLCJpc19zdWJzY3JpYmVkIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJsaWZldGltZV9hY2Nlc3MiLCJjcmVhdGVkQXQiLCJub3ciLCJsYXN0TG9naW4iLCJtb2RlbHMiLCJVc2VyIiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./models/User.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdeals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdeals.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdeals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdeals.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_deals_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/deals.js */ \"(api-node)/./pages/api/deals.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_deals_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_deals_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_deals_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_deals_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/deals\",\n        pathname: \"/api/deals\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_deals_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZGVhbHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmRlYWxzLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ2lEO0FBQ2pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxnREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsZ0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvZGVhbHMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2RlYWxzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZGVhbHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdeals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdeals.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/mongodb */ \"(api-node)/./lib/mongodb.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/auth */ \"(api-node)/./lib/auth.js\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../models/User */ \"(api-node)/./models/User.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([bcryptjs__WEBPACK_IMPORTED_MODULE_3__, _lib_auth__WEBPACK_IMPORTED_MODULE_4__]);\n([bcryptjs__WEBPACK_IMPORTED_MODULE_3__, _lib_auth__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n// Server-side import\n\n// Using Next.js with Mongoose for MongoDB connectivity\n// This avoids the 'dns' module error that occurs with the MongoDB adapter\nconst authOptions = {\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"text\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials) {\n                    console.error('No credentials provided');\n                    return null;\n                }\n                const { email, password } = credentials;\n                if (!email || !password) {\n                    console.error('Missing email or password');\n                    return null;\n                }\n                try {\n                    console.log(`Attempting to authorize: ${email}`);\n                    // Connect to the database\n                    await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n                    // Try to create test user if they don't exist\n                    if (email === 'test@example.com' && password === 'password123') {\n                        try {\n                            const existingUser = await _models_User__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findOne({\n                                email\n                            });\n                            if (!existingUser) {\n                                console.log('Creating test user since it does not exist');\n                                // Create a new test user\n                                const hashedPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"].hash(password, 12);\n                                const newUser = await _models_User__WEBPACK_IMPORTED_MODULE_5__[\"default\"].create({\n                                    email: 'test@example.com',\n                                    password: hashedPassword,\n                                    name: 'Test User',\n                                    trial_start_date: new Date(),\n                                    is_subscribed: false\n                                });\n                                console.log(`Test user created with ID: ${newUser._id}`);\n                                // Return the newly created test user\n                                return {\n                                    id: newUser._id.toString(),\n                                    email: newUser.email,\n                                    name: newUser.name,\n                                    userId: newUser._id.toString()\n                                };\n                            }\n                        } catch (e) {\n                            console.error('Error checking/creating test user:', e);\n                        }\n                    }\n                    // Find user in the database\n                    const user = await _models_User__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findOne({\n                        email\n                    });\n                    if (!user) {\n                        console.log(`No user found with email: ${email}`);\n                        return null;\n                    }\n                    console.log(`User found: ${user.email}, ID: ${user._id}, verifying password`);\n                    // Special case for unencrypted test user password\n                    if (password === 'password123' && email === 'test@example.com' && user.password === 'password123') {\n                        console.log('Using special case for test user password');\n                        return {\n                            id: user._id.toString(),\n                            email: user.email,\n                            name: user.name || '',\n                            userId: user._id.toString()\n                        };\n                    }\n                    // Verify the password\n                    const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_3__.compare)(password, user.password);\n                    if (!isValid) {\n                        console.log('Invalid password');\n                        return null;\n                    }\n                    console.log('Password verified successfully');\n                    // Return a user object excluding the password\n                    return {\n                        id: user._id.toString(),\n                        email: user.email,\n                        name: user.name || '',\n                        userId: user._id.toString()\n                    };\n                } catch (error) {\n                    console.error('Error in authorize:', error);\n                    // Don't throw, return null instead to show the error on the login form\n                    return null;\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.userId = user.id; // Ensure userId is in the token\n                token.name = user.name;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.userId = token.id; // Add userId to session for consistency\n                if (token.name) {\n                    session.user.name = token.name;\n                }\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/login\",\n        error: \"/login\",\n        newUser: \"/dashboard\"\n    },\n    secret: process.env.NEXTAUTH_SECRET || \"a-strong-secret-for-development-only\",\n    debug: \"development\" === 'development'\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFpQztBQUNpQztBQUNyQjtBQUNBO0FBQ2tDO0FBRS9FLHFCQUFxQjtBQUNtQjtBQUV4Qyx1REFBdUQ7QUFDdkQsMEVBQTBFO0FBQ25FLE1BQU1TLGNBQWM7SUFDekJDLFdBQVc7UUFDVFQsc0VBQW1CQSxDQUFDO1lBQ2xCVSxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQU87Z0JBQ3RDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUUsV0FBVUwsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhO29CQUNoQk0sUUFBUUMsS0FBSyxDQUFDO29CQUNkLE9BQU87Z0JBQ1Q7Z0JBRUEsTUFBTSxFQUFFTixLQUFLLEVBQUVHLFFBQVEsRUFBRSxHQUFHSjtnQkFFNUIsSUFBSSxDQUFDQyxTQUFTLENBQUNHLFVBQVU7b0JBQ3ZCRSxRQUFRQyxLQUFLLENBQUM7b0JBQ2QsT0FBTztnQkFDVDtnQkFFQSxJQUFJO29CQUNGRCxRQUFRRSxHQUFHLENBQUMsQ0FBQyx5QkFBeUIsRUFBRVAsT0FBTztvQkFFL0MsMEJBQTBCO29CQUMxQixNQUFNWCx3REFBU0E7b0JBRWYsOENBQThDO29CQUM5QyxJQUFJVyxVQUFVLHNCQUFzQkcsYUFBYSxlQUFlO3dCQUM5RCxJQUFJOzRCQUNGLE1BQU1LLGVBQWUsTUFBTWIsNERBQVksQ0FBQztnQ0FBRUs7NEJBQU07NEJBRWhELElBQUksQ0FBQ1EsY0FBYztnQ0FDakJILFFBQVFFLEdBQUcsQ0FBQztnQ0FFWix5QkFBeUI7Z0NBQ3pCLE1BQU1HLGlCQUFpQixNQUFNcEIscURBQWEsQ0FBQ2EsVUFBVTtnQ0FDckQsTUFBTVMsVUFBVSxNQUFNakIsMkRBQVcsQ0FBQztvQ0FDaENLLE9BQU87b0NBQ1BHLFVBQVVP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QUNMQyxRQUFRO1FBQ1J4QixPQUFPO1FBQ1BNLFNBQVM7SUFDWDtJQUNBbUIsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlLElBQUk7SUFDdkNDLE9BQU9ILGtCQUF5QjtBQUNsQyxFQUFFO0FBRUYsaUVBQWU3QyxnREFBUUEsQ0FBQ1MsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOZXh0QXV0aCBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xuaW1wb3J0IGRiQ29ubmVjdCBmcm9tIFwiLi4vLi4vLi4vbGliL21vbmdvZGJcIjtcbmltcG9ydCBiY3J5cHRqcywgeyBjb21wYXJlIH0gZnJvbSBcImJjcnlwdGpzXCI7XG5pbXBvcnQgeyBnZXRVc2VyQnlFbWFpbCwgdmVyaWZ5UGFzc3dvcmQsIGNyZWF0ZVVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vbGliL2F1dGhcIjtcblxuLy8gU2VydmVyLXNpZGUgaW1wb3J0XG5pbXBvcnQgVXNlciBmcm9tIFwiLi4vLi4vLi4vbW9kZWxzL1VzZXJcIjtcblxuLy8gVXNpbmcgTmV4dC5qcyB3aXRoIE1vbmdvb3NlIGZvciBNb25nb0RCIGNvbm5lY3Rpdml0eVxuLy8gVGhpcyBhdm9pZHMgdGhlICdkbnMnIG1vZHVsZSBlcnJvciB0aGF0IG9jY3VycyB3aXRoIHRoZSBNb25nb0RCIGFkYXB0ZXJcbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiBcIkNyZWRlbnRpYWxzXCIsXG4gICAgICBjcmVkZW50aWFsczoge1xuICAgICAgICBlbWFpbDogeyBsYWJlbDogXCJFbWFpbFwiLCB0eXBlOiBcInRleHRcIiB9LFxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfSxcbiAgICAgIH0sXG4gICAgICBhc3luYyBhdXRob3JpemUoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgaWYgKCFjcmVkZW50aWFscykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIGNyZWRlbnRpYWxzIHByb3ZpZGVkJyk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gY3JlZGVudGlhbHM7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWVtYWlsIHx8ICFwYXNzd29yZCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgZW1haWwgb3IgcGFzc3dvcmQnKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQXR0ZW1wdGluZyB0byBhdXRob3JpemU6ICR7ZW1haWx9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ29ubmVjdCB0byB0aGUgZGF0YWJhc2VcbiAgICAgICAgICBhd2FpdCBkYkNvbm5lY3QoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcnkgdG8gY3JlYXRlIHRlc3QgdXNlciBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgICAgICAgaWYgKGVtYWlsID09PSAndGVzdEBleGFtcGxlLmNvbScgJiYgcGFzc3dvcmQgPT09ICdwYXNzd29yZDEyMycpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ1VzZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgdGVzdCB1c2VyIHNpbmNlIGl0IGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHRlc3QgdXNlclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc2hlZFBhc3N3b3JkID0gYXdhaXQgYmNyeXB0anMuaGFzaChwYXNzd29yZCwgMTIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICAgICAgICAgICAgICB0cmlhbF9zdGFydF9kYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgaXNfc3Vic2NyaWJlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVGVzdCB1c2VyIGNyZWF0ZWQgd2l0aCBJRDogJHtuZXdVc2VyLl9pZH1gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIG5ld2x5IGNyZWF0ZWQgdGVzdCB1c2VyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgIGlkOiBuZXdVc2VyLl9pZC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBuZXdVc2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgICB1c2VySWQ6IG5ld1VzZXIuX2lkLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nL2NyZWF0aW5nIHRlc3QgdXNlcjonLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmluZCB1c2VyIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBObyB1c2VyIGZvdW5kIHdpdGggZW1haWw6ICR7ZW1haWx9YCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYFVzZXIgZm91bmQ6ICR7dXNlci5lbWFpbH0sIElEOiAke3VzZXIuX2lkfSwgdmVyaWZ5aW5nIHBhc3N3b3JkYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIGZvciB1bmVuY3J5cHRlZCB0ZXN0IHVzZXIgcGFzc3dvcmRcbiAgICAgICAgICBpZiAocGFzc3dvcmQgPT09ICdwYXNzd29yZDEyMycgJiYgZW1haWwgPT09ICd0ZXN0QGV4YW1wbGUuY29tJyAmJiBcbiAgICAgICAgICAgICAgdXNlci5wYXNzd29yZCA9PT0gJ3Bhc3N3b3JkMTIzJykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIHNwZWNpYWwgY2FzZSBmb3IgdGVzdCB1c2VyIHBhc3N3b3JkJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICBpZDogdXNlci5faWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgdXNlcklkOiB1c2VyLl9pZC50b1N0cmluZygpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWZXJpZnkgdGhlIHBhc3N3b3JkXG4gICAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghaXNWYWxpZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQgcGFzc3dvcmQnKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygnUGFzc3dvcmQgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmV0dXJuIGEgdXNlciBvYmplY3QgZXhjbHVkaW5nIHRoZSBwYXNzd29yZFxuICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgaWQ6IHVzZXIuX2lkLnRvU3RyaW5nKCksXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCAnJyxcbiAgICAgICAgICAgIHVzZXJJZDogdXNlci5faWQudG9TdHJpbmcoKVxuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gYXV0aG9yaXplOicsIGVycm9yKTtcbiAgICAgICAgICAvLyBEb24ndCB0aHJvdywgcmV0dXJuIG51bGwgaW5zdGVhZCB0byBzaG93IHRoZSBlcnJvciBvbiB0aGUgbG9naW4gZm9ybVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pLFxuICBdLFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXG4gIH0sXG4gIGNhbGxiYWNrczoge1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHRva2VuLmlkID0gdXNlci5pZDtcbiAgICAgICAgdG9rZW4udXNlcklkID0gdXNlci5pZDsgLy8gRW5zdXJlIHVzZXJJZCBpcyBpbiB0aGUgdG9rZW5cbiAgICAgICAgdG9rZW4ubmFtZSA9IHVzZXIubmFtZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgc2Vzc2lvbi51c2VyLmlkID0gdG9rZW4uaWQ7XG4gICAgICAgIHNlc3Npb24udXNlci51c2VySWQgPSB0b2tlbi5pZDsgLy8gQWRkIHVzZXJJZCB0byBzZXNzaW9uIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICBpZiAodG9rZW4ubmFtZSkge1xuICAgICAgICAgIHNlc3Npb24udXNlci5uYW1lID0gdG9rZW4ubmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgfSxcbiAgcGFnZXM6IHtcbiAgICBzaWduSW46IFwiL2xvZ2luXCIsXG4gICAgZXJyb3I6IFwiL2xvZ2luXCIsIC8vIEVycm9yIGNvZGUgcGFzc2VkIGluIHF1ZXJ5IHN0cmluZyBhcyA/ZXJyb3I9XG4gICAgbmV3VXNlcjogXCIvZGFzaGJvYXJkXCIsIC8vIFJlZGlyZWN0IG5ldyB1c2VycyB0byBkYXNoYm9hcmRcbiAgfSxcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfHwgXCJhLXN0cm9uZy1zZWNyZXQtZm9yLWRldmVsb3BtZW50LW9ubHlcIixcbiAgZGVidWc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgTmV4dEF1dGgoYXV0aE9wdGlvbnMpOyJdLCJuYW1lcyI6WyJOZXh0QXV0aCIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJkYkNvbm5lY3QiLCJiY3J5cHRqcyIsImNvbXBhcmUiLCJnZXRVc2VyQnlFbWFpbCIsInZlcmlmeVBhc3N3b3JkIiwiY3JlYXRlVXNlciIsIlVzZXIiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsIm5hbWUiLCJjcmVkZW50aWFscyIsImVtYWlsIiwibGFiZWwiLCJ0eXBlIiwicGFzc3dvcmQiLCJhdXRob3JpemUiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJleGlzdGluZ1VzZXIiLCJmaW5kT25lIiwiaGFzaGVkUGFzc3dvcmQiLCJoYXNoIiwibmV3VXNlciIsImNyZWF0ZSIsInRyaWFsX3N0YXJ0X2RhdGUiLCJEYXRlIiwiaXNfc3Vic2NyaWJlZCIsIl9pZCIsImlkIiwidG9TdHJpbmciLCJ1c2VySWQiLCJlIiwidXNlciIsImlzVmFsaWQiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInBhZ2VzIiwic2lnbkluIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsImRlYnVnIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/auth/[...nextauth].js\n");

/***/ }),

/***/ "(api-node)/./pages/api/deals.js":
/*!****************************!*\
  !*** ./pages/api/deals.js ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mongodb */ \"(api-node)/./lib/mongodb.js\");\n/* harmony import */ var _models_Deal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/Deal */ \"(api-node)/./models/Deal.js\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./auth/[...nextauth] */ \"(api-node)/./pages/api/auth/[...nextauth].js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth_nextauth___WEBPACK_IMPORTED_MODULE_3__]);\n_auth_nextauth___WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nasync function handler(req, res) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_3__.authOptions);\n        console.log(\" SESSION CHECK:\", JSON.stringify(session, null, 2));\n        if (!session) {\n            return res.status(401).json({\n                message: \"Unauthorized - No session\"\n            });\n        }\n        const userId = session.user.id;\n        console.log(\" USER ID:\", userId, \"TYPE:\", typeof userId);\n        // Log Deal schema for debugging\n        console.log(\" DEAL SCHEMA:\", _models_Deal__WEBPACK_IMPORTED_MODULE_1__[\"default\"].schema.paths.userId);\n        try {\n            const deals = await _models_Deal__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({\n                userId\n            }).sort({\n                createdAt: -1\n            });\n            console.log(\" DEALS FOUND:\", deals);\n            return res.status(200).json(deals);\n        } catch (queryError) {\n            console.error(\" QUERY ERROR:\", queryError);\n            const errorDetails = {\n                message: \"Error querying deals\",\n                details: queryError.message,\n                path: queryError.path,\n                value: queryError.value,\n                kind: queryError.kind\n            };\n            return res.status(500).json(errorDetails);\n        }\n    } catch (error) {\n        console.error(\" Server error in /api/deals:\", error);\n        return res.status(500).json({\n            message: \" Internal Server Error\",\n            details: error.message,\n            stack:  true ? error.stack : 0\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9kZWFscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMEM7QUFDTDtBQUNhO0FBQ0M7QUFFcEMsZUFBZUksUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUk7UUFDRixNQUFNTix3REFBU0E7UUFFZixNQUFNTyxVQUFVLE1BQU1MLGdFQUFnQkEsQ0FBQ0csS0FBS0MsS0FBS0gsd0RBQVdBO1FBQzVESyxRQUFRQyxHQUFHLENBQUMscUJBQXFCQyxLQUFLQyxTQUFTLENBQUNKLFNBQVMsTUFBTTtRQUUvRCxJQUFJLENBQUNBLFNBQVM7WUFDWixPQUFPRCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQTRCO1FBQ3JFO1FBRUEsTUFBTUMsU0FBU1IsUUFBUVMsSUFBSSxDQUFDQyxFQUFFO1FBQzlCVCxRQUFRQyxHQUFHLENBQUMsZUFBZU0sUUFBUSxTQUFTLE9BQU9BO1FBRW5ELGdDQUFnQztRQUNoQ1AsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQlIsMkRBQVcsQ0FBQ2tCLEtBQUssQ0FBQ0osTUFBTTtRQUV2RCxJQUFJO1lBQ0YsTUFBTUssUUFBUSxNQUFNbkIseURBQVMsQ0FBQztnQkFBRWM7WUFBTyxHQUFHTyxJQUFJLENBQUM7Z0JBQUVDLFdBQVcsQ0FBQztZQUFFO1lBQy9EZixRQUFRQyxHQUFHLENBQUMsbUJBQW1CVztZQUMvQixPQUFPZCxJQUFJTSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDTztRQUM5QixFQUFFLE9BQU9JLFlBQVk7WUFDbkJoQixRQUFRaUIsS0FBSyxDQUFDLG1CQUFtQkQ7WUFDakMsTUFBTUUsZUFBZTtnQkFDbkJaLFNBQVM7Z0JBQ1RhLFNBQVNILFdBQVdWLE9BQU87Z0JBQzNCYyxNQUFNSixXQUFXSSxJQUFJO2dCQUNyQkMsT0FBT0wsV0FBV0ssS0FBSztnQkFDdkJDLE1BQU1OLFdBQVdNLElBQUk7WUFDdkI7WUFDQSxPQUFPeEIsSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ2E7UUFDOUI7SUFDRixFQUFFLE9BQU9ELE9BQU87UUFDZGpCLFFBQVFpQixLQUFLLENBQUMsa0NBQWtDQTtRQUNoRCxPQUFPbkIsSUFBSU0sTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsU0FBUztZQUNUYSxTQUFTRixNQUFNWCxPQUFPO1lBQ3RCaUIsT0FBT0MsS0FBc0MsR0FBR1AsTUFBTU0sS0FBSyxHQUFHRSxDQUFTQTtRQUN6RTtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvcGFnZXMvYXBpL2RlYWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkYkNvbm5lY3QgZnJvbSBcIi4uLy4uL2xpYi9tb25nb2RiXCI7XG5pbXBvcnQgRGVhbCBmcm9tIFwiLi4vLi4vbW9kZWxzL0RlYWxcIjtcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoL25leHRcIjtcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSBcIi4vYXV0aC9bLi4ubmV4dGF1dGhdXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBkYkNvbm5lY3QoKTtcblxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzLCBhdXRoT3B0aW9ucyk7XG4gICAgY29uc29sZS5sb2coXCLwn5SNIFNFU1NJT04gQ0hFQ0s6XCIsIEpTT04uc3RyaW5naWZ5KHNlc3Npb24sIG51bGwsIDIpKTtcblxuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogXCJVbmF1dGhvcml6ZWQgLSBObyBzZXNzaW9uXCIgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlcklkID0gc2Vzc2lvbi51c2VyLmlkO1xuICAgIGNvbnNvbGUubG9nKFwi8J+UjSBVU0VSIElEOlwiLCB1c2VySWQsIFwiVFlQRTpcIiwgdHlwZW9mIHVzZXJJZCk7XG5cbiAgICAvLyBMb2cgRGVhbCBzY2hlbWEgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUubG9nKFwi8J+UpyBERUFMIFNDSEVNQTpcIiwgRGVhbC5zY2hlbWEucGF0aHMudXNlcklkKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGVhbHMgPSBhd2FpdCBEZWFsLmZpbmQoeyB1c2VySWQgfSkuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcIvCfk6YgREVBTFMgRk9VTkQ6XCIsIGRlYWxzKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkZWFscyk7XG4gICAgfSBjYXRjaCAocXVlcnlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIvCfkqUgUVVFUlkgRVJST1I6XCIsIHF1ZXJ5RXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JEZXRhaWxzID0ge1xuICAgICAgICBtZXNzYWdlOiBcIkVycm9yIHF1ZXJ5aW5nIGRlYWxzXCIsIFxuICAgICAgICBkZXRhaWxzOiBxdWVyeUVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHBhdGg6IHF1ZXJ5RXJyb3IucGF0aCxcbiAgICAgICAgdmFsdWU6IHF1ZXJ5RXJyb3IudmFsdWUsXG4gICAgICAgIGtpbmQ6IHF1ZXJ5RXJyb3Iua2luZFxuICAgICAgfTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbihlcnJvckRldGFpbHMpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwi8J+UpSBTZXJ2ZXIgZXJyb3IgaW4gL2FwaS9kZWFsczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgbWVzc2FnZTogXCLwn5SlIEludGVybmFsIFNlcnZlciBFcnJvclwiLCBcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdGFjazogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbImRiQ29ubmVjdCIsIkRlYWwiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwic2Vzc2lvbiIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VySWQiLCJ1c2VyIiwiaWQiLCJzY2hlbWEiLCJwYXRocyIsImRlYWxzIiwiZmluZCIsInNvcnQiLCJjcmVhdGVkQXQiLCJxdWVyeUVycm9yIiwiZXJyb3IiLCJlcnJvckRldGFpbHMiLCJkZXRhaWxzIiwicGF0aCIsInZhbHVlIiwia2luZCIsInN0YWNrIiwicHJvY2VzcyIsInVuZGVmaW5lZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/deals.js\n");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = import("bcryptjs");;

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fdeals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fdeals.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();